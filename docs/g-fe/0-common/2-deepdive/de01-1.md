---
sidebar_position: 1
---

# DeepDiveÂ ë¸Œë¼ìš°ì €, ë¦¬ì•¡íŠ¸, ì„œë²„ ë Œë”ë§

## ëª©ì°¨  

1.ë¸Œë¼ìš°ì € ë Œë”ë§    
2.ë¦¬ì•¡íŠ¸ ë Œë”ë§    
3.Next.js ë Œë”ë§  
4.Revisit = NextJS ì—ì„œ ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ëŠ” ê³¼ì •  

---

## ë¸Œë¼ìš°ì € ë Œë”ë§


![Alt text](image-2.png)

### ë¸Œë¼ìš°ì €ì˜ ë Œë”ë§ ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ì´ ìš”ì•½

1.DOM íŠ¸ë¦¬ ìƒì„±
- HTMLì´ DOM íŠ¸ë¦¬ë¡œ ë³€í™˜ë˜ëŠ” ë‹¨ê³„. 
- Bytes > HTML Characters > Tokens > Nodes > DOM  

2.CSSOM íŠ¸ë¦¬ ìƒì„±
- CSSê°€ CSSOM(CSS Object Model)ë¡œ ë³€í™˜ë˜ëŠ” ë‹¨ê³„  
- Bytes > HTML Characters > Tokens > Nodes > DOM  

3.ë Œë”ë§ íŠ¸ë¦¬ ìƒì„±
- DOM íŠ¸ë¦¬ + CSSOM íŠ¸ë¦¬ => Rendering Tree  

![alt](https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9Xbmy7JUOcRxn2Vh)

4.ë ˆì´ì•„ì›ƒ ë‹¨ê³„
- ë·°í¬íŠ¸ ë‚´ì—ì„œ ê° ìš”ì†Œì˜ ì •í™•í•œ ìœ„ì¹˜ì™€ í¬ê¸°ë¥¼ ì •í™•í•˜ê²Œ ìº¡ì²˜í•˜ëŠ” Box ëª¨ë¸ì´ ì¶œë ¥ 

5.í˜ì¸íŒ… ë‹¨ê³„
- ì‹¤ì œ í”½ì…€ë¡œ ë³€í™˜í•˜ì—¬ í™”ë©´ì— ê·¸ë¦¬ëŠ” ë‹¨ê³„ì…

- í¬ë¡¬ì€ ë¸”ë§í¬(Blink), ì‚¬íŒŒë¦¬ëŠ” ì›¹í‚·(Webkit) ê·¸ë¦¬ê³  íŒŒì´ì–´í­ìŠ¤ëŠ” ê²Œì½”(Gecko)ë¼ëŠ” ë Œë”ë§ ì—”ì§„ì„ ì‚¬ìš©


### ë¦¬í”Œë¡œìš°(Reflow), ë¦¬í˜ì¸íŠ¸(Repaint)  

ì–¸ì œ? 
- HTML ìš”ì†Œ ì¶”ê°€  
- CSS ë³€ê²½  

ë¦¬í”Œë¡œìš°(Reflow) : ë ˆì´ì•„ì›ƒì— ì˜í–¥ì´ ìˆëŠ” ë³€ê²½ì‚¬í•­ì´ ìˆì„ë•Œ. 
- position, width, height, margin, padding, border, border-width  
- font-size, font-weight, line-height, text-align, overflow  

ë¦¬í˜ì¸íŠ¸(Repaint)ë§Œ ì¼ì–´ë‚˜ëŠ” ëŒ€í‘œì ì¸ ì†ì„±ë“¤ì…ë‹ˆë‹¤.  
- background, color, text-decoration, border-style, border-radius  


ref : https://medium.com/%EA%B0%9C%EB%B0%9C%EC%9E%90%EC%9D%98%ED%92%88%EA%B2%A9/%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EC%9D%98-%EB%A0%8C%EB%8D%94%EB%A7%81-%EA%B3%BC%EC%A0%95-5c01c4158ce

#### ìµœì†Œí™”  

transform VS position, top, left 
- ë ˆì´ì•„ì›ƒì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ” ì†ì„±(ì˜ˆ: opacity, transform)ìœ¼ë¡œ ì‘ì„±. 
- position, top, left ë“±ì˜ ì†ì„±ì€ ë ˆì´ì•„ì›ƒì— ì˜í–¥ì„ ì£¼ê¸° ë•Œë¬¸ì— ë¦¬í”Œë¡œìš°ë¥¼ ìœ ë°œ.   


## ë¦¬ì•¡íŠ¸ ë Œë”ë§  

### ìš©ì–´

1.ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ 
- JSXë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜.  
- ReactElementë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜.  
- JSXëŠ” createReactElement í•¨ìˆ˜ë¡œ ë³€í™˜ëœë‹¤.    

```js
function SecondChild(){
  const handleClick = useCallback(()=>{},[])
  return <div>SecondChild</div> // JSX
}
---
function SecondChild() {
  const handleClick = useCallback(() => {}, []);
  // JSX > createReactElement
  return /*#__PURE__*/ React.createElement("div", null, "SecondChild");
}
```
>https://babeljs.io/repl

![Alt text](image-4.png)

2.Virtual DOM    

VDOMì€ ì¼ì¢…ì˜ í”„ë¡œê·¸ë˜ë° ì»¨ì…‰ì´ë‹¤. 
- ì¸ë©”ëª¨ë¦¬ ìƒì˜ ê°€ìƒì˜ ë‘  (ReactDOM)ì„ í•˜ë‚˜ ë„ìš´ë‹¤.  
- ê·¸ë¦¬ê³  ì‹¤ì œ DOMê³¼ Syncë¥¼ ë§ì¶˜ë‹¤. (ì´ë¥¼ ì¬ì¡°ì • Reconciliation)    
- (ë§¤ë²ˆ DOMì„ ë¦¬í˜ì¸íŒ… í•˜ëŠ”ê²ƒ ë³´ë‹¤ í›¨ì”¬ ë¹„ìš©ì´ ì‹¸ë‹¤.)  

#### ğŸ“Œ Double Buffering êµ¬ì¡°  
![alt](https://velog.velcdn.com/images/boyeon_jeong/post/5fb462bc-4ff3-471b-9fe3-4c60d5eeaf67/image.png)    

1.Current Tree
- ì‹¤ì œDOMì— ë°˜ì˜ëœ(mount) fiber Node Tree ì´ë‹¤.    
- *fiber node = React Elementì— ì¶”ê°€ ê¸°ëŠ¥ì´ ë¶™ì–´ í™•ì¥ëœ ê°ì²´    

2.WorkInProgress Tree (WIP Tree)
- Render Phaseì—ì„œ ì‘ì—…ì¤‘ì¸ fiber Node Treeì´ë‹¤.  
- current node ì™€ alternate keyë¥¼ ì´ìš©í•´ì„œ ì„œë¡œ ì°¸ì¡°ë¥¼ í•˜ê³  ìˆë‹¤.  
- Commit Phaseê°€ ëë‚˜ë©´ Current Treeê°€ ëœë‹¤. 


### ë¦¬ì•¡íŠ¸ì˜ ë Œë”ë§ ê³¼ì •

- ë¦¬ì•¡íŠ¸ì˜ ë Œë”ë§ ê³¼ì • 1.Render Phaseì™€ 2. Commit Phase  
- Reconciliationì€ Reactì˜ Virtual DOMì—ì„œ ë°œìƒí•œ ë³€ê²½ì‚¬í•­ì„ Real DOMì— ë°˜ì˜í•˜ëŠ” ê³¼ì •ì„ ì˜ë¯¸.  

1.Render Phase
- 1.Current Tree ê¸°ë°˜ìœ¼ë¡œ WIP Tree ìƒì„±
- 2.ì»´í¬ë„ŒíŠ¸ì˜ ë³€ê²½ ì‚¬í•­( ë¦¬ë Œë”ë§, ìƒˆë¡œìš´ ë¼ì´í”„ì‹¸ì´í´ )ì„ ê¸°ë°˜í•˜ì—¬ React Element ë°˜í™˜
- 3.React ElementëŠ” Fiber Node ë¡œ í™•ì¥ë˜ì–´ WIP Treeê°€ ì—…ë°ì´íŠ¸
- 4.diffing ì•Œê³ ë¦¬ì¦˜ì„ í†µí•´ ë³€ê²½ëœ ë…¸ë“œë¥¼ ë§ˆí‚¹
    - *ReactëŠ” ì´ ê³¼ì •ì—ì„œ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‘ì—…ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” Concurrent Modeì—ì„œ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•¨.    
    - *Scheduler(ìŠ¤ì¼€ì¤„ëŸ¬)ë¥¼ í†µí•´ ë Œë”ë§ ìˆœì„œë¥¼ ì¡°ì‘í•  ìˆ˜ ìˆì–´ìš”. useTransition í›…ì„ ì‚¬ìš©í•˜ë©´ ì‘ì—…ì„ ì§€ì—°ì‹œí‚¬ ìˆ˜ ìˆì–´ìš”.  

2.Commit Phase

- Commit Phaseì—ì„œëŠ” Render Phaseì—ì„œ ë³€ê²½ëœ Virtual DOMì„ ì‹¤ì œë¡œ Real DOMì— ë°˜ì˜í•˜ëŠ” ë‹¨ê³„ì˜ˆìš”.
- ì´ ë‹¨ê³„ëŠ” ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©°, ì‹¤ì œ DOM ì¡°ì‘, ë¸Œë¼ìš°ì €ì— UIë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ì‘ì—…ì´ ì´ë£¨ì–´ì ¸ìš”.   
- 1.useLayoutEffect ë™ê¸°ì  ì‹¤í–‰
    - useLayoutEffect í›…ì´ ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë¼ìš”. ì´ í›…ì€ DOMì´ ì—…ë°ì´íŠ¸ëœ ì§í›„, í™”ë©´ì— ê·¸ë¦¬ê¸° ì „ì— ì‹¤í–‰ë˜ë¯€ë¡œ, DOM ì¡°ì‘ì´ í•„ìš”í•  ë•Œ ìœ ìš©í•´ìš”.
- 2.DOM ì—…ë°ì´íŠ¸ ë° Paint
    - ë³€ê²½ëœ Virtual DOMì˜ ë‚´ìš©ì„ Real DOMì— ë°˜ì˜í•´ìš”.
    - ë¸Œë¼ìš°ì €ëŠ” ì´ë•Œ DOMì„ Paint(í™”ë©´ì— ê·¸ë¦¬ê¸°) í•˜ë©°, UIì— ë³€ê²½ ì‚¬í•­ì´ ë°˜ì˜ë¼ìš”.
- 3.useEffect ë¹„ë™ê¸°ì  ì‹¤í–‰
    - useEffect í›…ì€ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë¼ìš”. ì´ í›…ì€ DOMì´ ì—…ë°ì´íŠ¸ë˜ê³ , í™”ë©´ì— ê·¸ë ¤ì§„ í›„ì— ì‹¤í–‰ë˜ë©°, ì£¼ë¡œ ë¹„ë™ê¸° ì‘ì—…ì´ë‚˜ ì„œë²„ í†µì‹ ì— ì‚¬ìš©ë¼ìš”.


![Alt text](image-3.png)
https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/

### diffing ì•Œê³ ë¦¬ì¦˜ ì‹œê°„ë³µì¡ë„  

ReactëŠ” ë‘ ê°€ì§€ ê°€ì •ì„ ê¸°ë°˜í•˜ì—¬ O(n) ë³µì¡ë„ì˜ íœ´ë¦¬ìŠ¤í‹± ì•Œê³ ë¦¬ì¦˜ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.  
- 1.ì„œë¡œ ë‹¤ë¥¸ íƒ€ì…ì˜ ë‘ ì—˜ë¦¬ë¨¼íŠ¸ëŠ” ì„œë¡œ ë‹¤ë¥¸ íŠ¸ë¦¬ë¥¼ ë§Œë“¤ì–´ë‚¸ë‹¤. 
- 2.ê°œë°œìê°€ key propì„ í†µí•´, ì—¬ëŸ¬ ë Œë”ë§ ì‚¬ì´ì—ì„œ ì–´ë–¤ ìì‹ ì—˜ë¦¬ë¨¼íŠ¸ê°€ ë³€ê²½ë˜ì§€ ì•Šì•„ì•¼ í• ì§€ í‘œì‹œí•´ ì¤„ ìˆ˜ ìˆë‹¤.   
  - *type, key ì˜ ë³€ê²½ => ì»´í¬ë„ŒíŠ¸ íŒŒê´´ í›„ ì¬ìƒì„±  


![Alt text](image-5.png)

### ë¦¬ë Œë”ë§ì´ë€?  
- ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ í˜¸ì¶œë˜ëŠ” ê²ƒ   
- ì»´í¬ë„ŒíŠ¸ ì¬ìƒì„±ê³¼ ë¦¬ë Œë”ë§ì„ í—·ê°ˆë¦¬ë©´ ì•ˆëœë‹¤.  

ë¦¬ë Œë”ë§ì´ ë˜ëŠ” ì¡°ê±´  
- 1.state ê°€ ë³€ê²½  
- 2.props ê°€ ë³€ê²½  

ì»´í¬ë„ŒíŠ¸ ì¬ìƒì„±ì˜ ì¡°ê±´
- 1.Component type ë³€ê²½
- 2.key props ë³€ê²½
- 3.ì¡°ê±´ë¶€ ëœë”ë§ (if, && ì‚¬ìš©) 
  - *ê¸°ì¡´ ìƒíƒœê°€ ìœ ì§€ëœë‹¤ë©´ ë¦¬ë Œë”ë§ ì´ë‹¤.
  - *ì¬ìƒì„±ì€ í›¨ì”¬ ë” ë¹„ì‹¼ ë¹„ìš©ì´ë‹¤. ë¦¬ë Œë”ë§ì„ ì´ìš©í•˜ì.    

### RenderPhase, CommitPhase Counter

```js
import React, { useRef, useEffect } from 'react';

function RenderCounterComponent() {
  const renderCount = useRef(0);
  const commitCount = useRef(0);

  renderCount.current += 1;
  console.log(`ëœë” íšŸìˆ˜: ${renderCount.current}`);

  useLayoutEffect(() => {
    commitCount.current += 1;
    console.log(`ì»¤ë°‹ íšŸìˆ˜: ${commitCount.current}`);
  });

  return (
    <div>
      <p>ì´ ì»´í¬ë„ŒíŠ¸ëŠ” {renderCount.current}ë²ˆ ë Œë”ë§ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
    </div>
  );
}

export default RenderCounterComponent;

```

## ë¦¬ì•¡íŠ¸ ì¬ìƒì„± ìµœì í™”

### 1.ì¡°ê±´ë¶€ ë Œë”ë§ì—ì„œ ìˆ¨ê¹€ì²˜ë¦¬ë¡œ

- &&, if ëŒ€ì‹  display:none

### 2.ì»´í¬ë„ŒíŠ¸ í‚¤ ê´€ë¦¬

- ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœì™€ ì—°ê´€ìˆëŠ” key ì‚¬ìš©
- *ë°°ì—´ì˜ idxë¡œ keyë¥¼ ì‚¬ìš©í•˜ëŠ”ê²ƒì€ ì§€ì–‘.  


## ë¦¬ì•¡íŠ¸ ë Œë”ë§ ìµœì í™”  

ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ì¤„ì´ê¸°  

### 1.React.memo
- Render Phase ë§‰ëŠ”ê²ƒì´ ëª©ì   
- React.memo : ì–•ì€ ë¹„êµë¥¼ ì‚¬ìš©í•´ì„œ props ë¹„êµ 
- *ìœ„ ì–•ì€ë¹„êµì—ì„œ ê°ì²´ì˜ ê²½ìš° useMemo, í•¨ìˆ˜ì˜ ê²½ìš° useCallback ìœ¼ë¡œ ë™ì¼ ì°¸ì¡°ê°’ ì²˜ë¦¬ í•„ìš”.  


### 2.useCallback  

```js
const Case01 = () => {
  const handler = () => {};

  return (
    <div>
      <Second handler={handler} />
    </div>
  );
};
```
- ë¶€ëª¨ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ë˜ë©´ í•¸ë“¤ëŸ¬í•¨ìˆ˜ë„ ë‹¤ì‹œ ë§Œë“¤ì–´ì§„ë‹¤.      
- handler í•¨ìˆ˜ë¥¼ useCallback ìœ¼ë¡œ ê°ì‹¸ ë™ì¼í•œ ì°¸ì¡°ê°’ì„ ë§Œë“¤ì–´ ì¤€ë‹¤.    
- ì—¬ì „íˆ ë¦¬ë Œë”ë§ì´ ëœë‹¤. 
- Commit Phaseì—ì„œ ì¬ì¡°ì •ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤. (í™•ì¸ê°€ëŠ¥?)  

### 3.useMemo
- ê°ì²´ ì°¸ì¡°ëŠ” useMemo ì„ ì´ìš©í•´ì„œ ì°¸ì¡°ê°’ì„ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.  
- React.memoì—ì„œ ì–•ì€ë¹„êµë¡œ Render Phase ìµœì†Œí™” í•  ìˆ˜ ìˆë‹¤.    


### ë¬´ì‘ì • ì‚¬ìš©í•˜ëŠ”ê²ƒì´ ì¢‹ì„ê¹Œ? 

![Alt text](image.png)  
1.React.memo ì—†ì´ ë¦¬ë Œë”ë§ ë°©ì§€í•˜ê¸°  
- ComponentëŠ” childrenë¥¼ í•©ì„±í•˜ê³  ìˆë‹¤. 
  - babel ê²°ê³¼ë¬¼ì„ ë³´ë©´ childrenì— createElement í•¨ìˆ˜ê°€ ì—†ë‹¤.
  - Component ë¦¬ëœë”ë§ì— ì˜í•´ ì˜ì¡´í•˜ì§€ ì•Šì•„ì„œ ë¦¬ë Œë”ë§ ê°œì„  ê°€ëŠ¥  

![Alt text](image-6.png)

2.ë¦¬ì•¡íŠ¸ê´€ë¦¬ì—ì„œ ë²—ì–´ë‚˜ê¸°  
- uncontrolled formì„ ì‚¬ìš©í•˜ë©´ ë¦¬ë Œë”ë§ì´ í•„ìš”ì—†ì–´ì§„ë‹¤.  

--- 

## 1.NextJS ì—ì„œ ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ëŠ” ê³¼ì •  


### ìš©ì–´

1.Component ì»´í¬ë„ŒíŠ¸ë€?  
- ì»´í¬ë„ŒíŠ¸ë¼ê³  í•˜ë©´ ì¼ë°˜ì ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ì´ë‹¤.  
- ì›ë˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸(RCC) ê°œë…ë„ ì—†ì—ˆì§€ë§Œ, ì„œë²„ ì»´í¬ë„ŒíŠ¸ ê°œë…ì´ ë‚˜ì˜¤ë©´ì„œ êµ¬ë¶„ì§“ê¸° ìœ„í•´ ë‚˜ì™”ë‹¤.   
- ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ : JSXë¥¼ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.  
  - ì´ëŠ” propsë¥¼ ì¸ìë¡œ ë°›ê³ , ë‚´ë¶€ì—ëŠ” stateê°€ ì¡´ì¬í•œë‹¤.    

*ì´í•˜
- RCS: ë¦¬ì•¡íŠ¸ ì„œë²„ ì»´í¬ë„ŒíŠ¸  
- CCS: ë¦¬ì•¡íŠ¸ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸   


2.ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ì´ë€?  

ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ì€ V-DOMì„ ê·¸ë¦¬ëŠ” ê³¼ì • ì´ë‹¤.  
- 2.1 JSXëŠ” íŠ¸ëœìŠ¤ íŒŒì¼ë§ì„ í†µí•´ (babel) createReactElement í•¨ìˆ˜ë¡œ ë³€ê²½ëœë‹¤.  
- 2.2 ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ëŠ” ë¦¬ì•¡íŠ¸ ì—˜ë¦¬ë¨¼íŠ¸ê°€ ëœë‹¤.  
- 2.3 ë¦¬ì•¡íŠ¸ ì—˜ë¦¬ë¨¼íŠ¸ëŠ” ê°ì²´ì´ë©° DOMì„ ê·¸ë¦¬ê¸° ìœ„í•œ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆë‹¤.  
  - 2.4 ë¦¬ì•¡íŠ¸ ì—˜ë¦¬ë¨¼íŠ¸ëŠ” Fiberë¡œ í™•ì¥ë˜ë©° ì´ê²ƒì€ V-Domì„ êµ¬ì„±í•œë‹¤. 
  - ì´ê²ƒì´ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ì´ë‹¤.  
  - 2.5 V-Domì€ diffing ì•Œê³ ë¦¬ì¦˜ì„ í†µí•´ì„œ R-DOMì— ë°˜ì˜ëœë‹¤.   

>https://nextjs.org/docs/app/building-your-application/rendering/server-components#how-are-server-components-rendered  

### Rendering Chunk  

Next.jsëŠ” ë Œë”ë§ì„ ì²­í¬ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•˜ì—¬ ì²˜ë¦¬í•œë‹¤.  
- Next.jsëŠ” Reactì˜ APIë¥¼ ì‚¬ìš©í•´ì„œ ë Œë”ë§ì„ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ í•˜ëŠ” ê²ƒ  

1.Route Segment Boundaries   
- chunkë‹¨ìœ„ë¡œ split ë˜ì–´ ë Œë”ë§. (individual route segments)  
![alt](https://nextjs.org/_next/image?url=%2Fdocs%2Fdark%2Floading-special-file.png&w=3840&q=75)
- app Routerì˜ loading, error ì»´í¬ë„ŒíŠ¸ê°€ ê´€ì—¬.  
  - ë Œë”ë§ ì „ : loading component
  - ë Œë”ë§ ì™„ë£Œ : page component
  - ë Œë”ë§ ì˜¤ë¥˜ : error


2.Suspense Boundaries   
- Suspense ê²½ê³„ > chunkë‹¨ìœ„ë¡œ split ë˜ì–´ ë Œë”ë§. 

![alt](https://nextjs.org/_next/image?url=%2Fdocs%2Fdark%2Fserver-rendering-with-streaming.png&w=3840&q=75)

```js
import { Suspense } from 'react'
import { PostFeed, Weather } from './Components'
 
export default function Posts() {
  return (
    <section>
      <Suspense fallback={<p>Loading feed...</p>}>
        <PostFeed />
      </Suspense>
      <Suspense fallback={<p>Loading weather...</p>}>
        <Weather />
      </Suspense>
    </section>
  )
}
```   

### Next.jsì˜ ë Œë”ë§ 5ë‹¨ê³„    

### 1~2 : ì„œë²„ì—ì„œ ì¼ì–´ë‚˜ëŠ” ê³¼ì •  

1.RSC > RSC Payload
- ReactëŠ” ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¥¼ React ì„œë²„ ì»´í¬ë„ŒíŠ¸ í˜ì´ë¡œë“œ(RSC Payload)ë¼ëŠ” íŠ¹ë³„í•œ ë°ì´í„° í˜•ì‹ìœ¼ë¡œ ë Œë”ë§í•´ìš”.

React ì„œë²„ ì»´í¬ë„ŒíŠ¸ í˜ì´ë¡œë“œ(RSC)
- ë Œë”ë§ëœ React ì„œë²„ ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ì˜ ì••ì¶•ëœ ë°”ì´ë„ˆë¦¬ í‘œí˜„ì´ì—ìš”. 
- ì´ í˜ì´ë¡œë“œëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ Reactê°€ ë¸Œë¼ìš°ì €ì˜ DOMì„ ì—…ë°ì´íŠ¸í•˜ëŠ” ë° ì‚¬ìš©ë¼ìš”. 
- RSC í˜ì´ë¡œë“œì—ëŠ” ë‹¤ìŒì´ í¬í•¨ë¼ìš”:
  - 1.RCS ë Œë”ë§ ê²°ê³¼
  - 2.Placeholders : CCSë¥¼ ë Œë”ë§í•´ì•¼ í•˜ëŠ” ìœ„ì¹˜ + í•´ë‹¹ JavaScript íŒŒì¼ì— ëŒ€í•œ references    
  - 3.ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¡œ ì „ë‹¬ëœ ëª¨ë“  props

2.HTML ë Œë”ë§ ê²°ê³¼ë¬¼ ì¶œë ¥  
- Next.jsëŠ” : RSC Payload + Client Component JavaScript instructions > ì„œë²„ì—ì„œ HTMLì„ ë Œë”ë§í•©ë‹ˆë‹¤.

### 3~5 : ë¸Œë¼ìš°ì €ì—ì„œ ì¼ì–´ë‚˜ëŠ” ê³¼ì •   

3.HTML Preview  
- ë¸Œë¼ìš°ì €ì—ì„œëŠ” SSRê³¼ì •ì—ì„œ ìƒì„±ëœ HTMLì„ ë°›ì•„ì„œ ì¦‰ì‹œ ë³´ì—¬ì¤€ë‹¤.  
- ì´ëŠ” fast but non-interactive preview ( ì´ˆê¸° í˜ì´ì§€ ë¡œë“œì—ë§Œ í•´ë‹¹, SEO ìœ ë¦¬ )     

4.Reconcile  
- RCS Payload ë¥¼ í†µí•´ Client and Server Component treesì˜ Reconcile ì´ ì¼ì–´ë‚œë‹¤.  
- Server Component trees ì—ëŠ” Placeholders ê°€ ì¡´ì¬í•œë‹¤.  
- ì´ ìë¦¬ë¥¼ Client Componentê°€ ë“¤ì–´ê°€ë„ë¡ Reconcile(ì¡°ì •)ì´ ì¼ì–´ë‚œë‹¤.  
- ìµœì¢…ì ìœ¼ë¡œ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬=V-DOMì´ ë§Œë“¤ì–´ì§„ë‹¤.    

5.Hydrate  
- Hydrationì€ interactive ë§Œë“¤ê¸° ìœ„í•¨ì´ë‹¤.   
- Client Component JavaScript instructions ì´ ì‚¬ìš©ëœë‹¤.  
  - ê·¸ ì•ˆì—ëŠ” useState, Event Handler í•¨ìˆ˜ ë“±ì´ ìˆë‹¤.    
