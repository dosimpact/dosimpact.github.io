"use strict";(self.webpackChunkdosimpact_blog=self.webpackChunkdosimpact_blog||[]).push([[4934],{3905:(e,r,t)=>{t.d(r,{Zo:()=>m,kt:()=>d});var a=t(67294);function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){n(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function i(e,r){if(null==e)return{};var t,a,n=function(e,r){if(null==e)return{};var t,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],r.indexOf(t)>=0||(n[t]=e[t]);return n}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var s=a.createContext({}),p=function(e){var r=a.useContext(s),t=r;return e&&(t="function"==typeof e?e(r):l(l({},r),e)),t},m=function(e){var r=p(e.components);return a.createElement(s.Provider,{value:r},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var r=e.children;return a.createElement(a.Fragment,{},r)}},f=a.forwardRef((function(e,r){var t=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),u=p(t),f=n,d=u["".concat(s,".").concat(f)]||u[f]||c[f]||o;return t?a.createElement(d,l(l({ref:r},m),{},{components:t})):a.createElement(d,l({ref:r},m))}));function d(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var o=t.length,l=new Array(o);l[0]=f;var i={};for(var s in r)hasOwnProperty.call(r,s)&&(i[s]=r[s]);i.originalType=e,i[u]="string"==typeof e?e:n,l[1]=i;for(var p=2;p<o;p++)l[p]=t[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}f.displayName="MDXCreateElement"},49588:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var a=t(87462),n=(t(67294),t(3905));const o={sidebar_position:6},l="Terraform",i={unversionedId:"g-devops/terraform/terraform-001",id:"g-devops/terraform/terraform-001",title:"Terraform",description:"Terraform?",source:"@site/docs/g-devops/6-terraform/terraform-001.md",sourceDirName:"g-devops/6-terraform",slug:"/g-devops/terraform/terraform-001",permalink:"/docs/g-devops/terraform/terraform-001",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/g-devops/6-terraform/terraform-001.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"devOps",previous:{title:"Terraform",permalink:"/docs/category/terraform"}},s={},p=[{value:"Terraform?",id:"terraform-1",level:2},{value:"\ud14c\ub77c\ud3fc vs Ansible",id:"\ud14c\ub77c\ud3fc-vs-ansible",level:2},{value:"Terraform \uc124\uce58(MacOS)",id:"terraform-\uc124\uce58macos",level:2},{value:"Terraform \uc2e4\ud589",id:"terraform-\uc2e4\ud589",level:2},{value:"AWS \uc5f0\ub3d9",id:"aws-\uc5f0\ub3d9",level:2},{value:"1.IAM \uc720\uc800 \ub9cc\ub4e4\uae30",id:"1iam-\uc720\uc800-\ub9cc\ub4e4\uae30",level:3},{value:"EC \ub9cc\ub4e4\uc5b4\ubcf4\uae30 (first-steps)",id:"ec-\ub9cc\ub4e4\uc5b4\ubcf4\uae30-first-steps",level:2},{value:"\uc720\uc6a9\ud55c \uba85\ub839\uc5b4",id:"\uc720\uc6a9\ud55c-\uba85\ub839\uc5b4",level:2}],m={toc:p},u="wrapper";function c(e){let{components:r,...o}=e;return(0,n.kt)(u,(0,a.Z)({},m,o,{components:r,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"terraform"},"Terraform"),(0,n.kt)("h2",{id:"terraform-1"},"Terraform?"),(0,n.kt)("p",null,"Terraform\uc740 HashiCorp\uc5d0\uc11c \uac1c\ubc1c\ud55c \uc624\ud508 \uc18c\uc2a4 \uae30\ubc18\uc758 \uc778\ud504\ub77c\uc2a4\ud2b8\ub7ed\ucc98 \uc790\ub3d9\ud654 \ub3c4\uad6c  "),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\u201cInfrastructure as Code (IaC)\u201d \uac1c\ub150\uc744 \uad6c\ud604\ud55c \ub3c4\uad6c "),(0,n.kt)("li",{parentName:"ul"},"\ud074\ub77c\uc6b0\ub4dc \uc11c\ube44\uc2a4 \uc81c\uacf5\uc790(AWS, Google Cloud, Azure \ub4f1)\ub098 \uc628\ud504\ub808\ubbf8\uc2a4 \ub370\uc774\ud130 \uc13c\ud130\uc5d0\uc11c \uc778\ud504\ub77c\ub97c \ud504\ub85c\ube44\uc800\ub2dd\ud558\uace0 \uad00\ub9ac  "),(0,n.kt)("li",{parentName:"ul"},"Make your infrastructure auditable  "),(0,n.kt)("li",{parentName:"ul"},"You can keep your infrastructure change history in a version control",(0,n.kt)("br",{parentName:"li"}),"system like GIT  ")),(0,n.kt)("h2",{id:"\ud14c\ub77c\ud3fc-vs-ansible"},"\ud14c\ub77c\ud3fc vs Ansible"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Terraform: \uc778\ud504\ub77c \uc790\uc6d0 \uad00\ub9ac \ubc0f \ubc30\ud3ec\uc5d0 \uc911\uc810\uc744 \ub460 (\ud074\ub77c\uc6b0\ub4dc \uc778\ud504\ub77c, \ub124\ud2b8\uc6cc\ud06c \ub4f1).  ")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-hcl"},'provider "aws" {\n  region = "us-west-2"\n}\n\nresource "aws_instance" "example" {\n  ami           = "ami-0c55b159cbfafe1f0"\n  instance_type = "t2.micro"\n}\n')),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Ansible: \uc11c\ubc84 \uad6c\uc131 \uad00\ub9ac, \uc18c\ud504\ud2b8\uc6e8\uc5b4 \uc124\uce58, \ud0dc\uc2a4\ud06c \uc790\ub3d9\ud654 \ub4f1\uc5d0 \uc911\uc810\uc744 \ub460.    ")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-yml"},"- hosts: webservers\n  become: true\n  tasks:\n    - name: Install Nginx\n      apt:\n        name: nginx\n        state: present\n")),(0,n.kt)("p",null,"\ucc38\uace0 : hcl = HashiCorp Configuration Language   "),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"HashiCorp\uc758 \ub2e4\uc591\ud55c \uc778\ud504\ub77c \uad00\ub9ac \ub3c4\uad6c\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 \uc5b8\uc5b4, (\ud2b9\ud788 \ud14c\ub77c\ud3fc)  ")),(0,n.kt)("h2",{id:"terraform-\uc124\uce58macos"},"Terraform \uc124\uce58(MacOS)"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"brew tap hashicorp/tap\nbrew install hashicorp/tap/terraform\nterraform version\n")),(0,n.kt)("p",null,"github : ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/wardviaene/terraform-course"},"https://github.com/wardviaene/terraform-course")," "),(0,n.kt)("h2",{id:"terraform-\uc2e4\ud589"},"Terraform \uc2e4\ud589"),(0,n.kt)("p",null,"1.console"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\ud14c\ub77c\ud3fc\uc740 \ub514\ub809\ud130\ub9ac \ub0b4 \ubaa8\ub4e0 \ud30c\uc77c\ub4e4\uc744 \uc77d\uc5b4\uc11c \ud558\ub098\uc758 \ucf54\ub4dc\ub85c \ub9cc\ub4e0\ub2e4.  "),(0,n.kt)("li",{parentName:"ul"},"terraform console \ub85c \uc2dc\uc791\ud560 \uc218 \uc788\ub2e4.  "),(0,n.kt)("li",{parentName:"ul"},"\ud30c\uc77c\uc774\ub984\uc740 \uc0c1\uad00\uc5c6\ub2e4. \uc5d4\ud2b8\ub9ac\ud3ec\uc778\ud2b8\ub3c4 \uc5c6\ub2e4.  ")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'# main.tf\nvariable "myvar" {\n  type    = string\n  default = "hello terraform"\n}\n\nvariable "mymap" {\n  type = map(string)\n  default = {\n    "mykey" = "my value"\n  }\n}\n\nvariable "mylist" {\n  type    = list(number)\n  default = [1, 2, 3]\n}\n---\nterraform console # \uc2e4\ud589 \nvar.myvar # \ubcc0\uc218\ub294 var \uac1d\uccb4\uc548\uc5d0 \ubaa8\uc5ec\uc788\ub2e4.  \n')),(0,n.kt)("p",null,"2.init"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-hcl"},'provider "aws" {\n\n}\n\nvariable "AWS_REGION" {\n  type = string\n}\n\nresource "aws_instance" "example" {\n  ami           = var.AMIS[var.AWS_REGION]\n  instance_type = "t2.micro"\n}\n---\nterraform init  # \uacf5\uae09\uc790\uac00 \ubcc0\uacbd\ub420\ub54c\ub9c8\ub2e4 \ucd08\uae30\ud654\ub97c \ud574\uc57c\ud55c\ub2e4. \uad00\ub828 \ubcc0\uc218\ub4e4\uc774 \ub4e4\uc5b4\uc628\ub2e4.  \n')),(0,n.kt)("h2",{id:"aws-\uc5f0\ub3d9"},"AWS \uc5f0\ub3d9"),(0,n.kt)("p",null,"\ud504\ub85c\uadf8\ub798\ub9e4\ud2f1 \ubc29\uc2dd\uc73c\ub85c AWS \uad00\ub9ac\ud560 \uc218 \uc788\ub294 \uad8c\ud55c\uc744 \ub9cc\ub4e4\uc5b4\uc57c \ud55c\ub2e4. "),(0,n.kt)("h3",{id:"1iam-\uc720\uc800-\ub9cc\ub4e4\uae30"},"1.IAM \uc720\uc800 \ub9cc\ub4e4\uae30"),(0,n.kt)("p",null,"access key : AKIAU5LH5U3L2LMYKAFJ / secret key : A5**q"),(0,n.kt)("p",null,"1.1 \uc0ac\uc6a9\uc790\ub97c \ud558\ub098 \ub9cc\ub4e0\ub2e4. "),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"alt",src:t(30243).Z,width:"1688",height:"1030"}),"  "),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\uc0ac\uc6a9\uc790\ub97c \ub9cc\ub4e4\uba74\uc11c, admin access \uc0ac\uc6a9\uc790 \uadf8\ub8f9\uc744 \ud558\ub098 \ub9cc\ub4e0\ub2e4.")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"alt",src:t(48846).Z,width:"2938",height:"870"}),"  "),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\ub9cc\ub4e4\uc5b4\uc9c4 \uc0ac\uc6a9\uc790")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Alt text",src:t(97890).Z,width:"2320",height:"1534"}),"\n",(0,n.kt)("img",{alt:"alt",src:t(60265).Z,width:"2750",height:"1448"}),"  "),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"\uc0ac\uc6a9\uc790\uc5d0\uac8c \ud504\ub85c\uadf8\ub798\ub9e4\ud2f1 \ubc29\uc2dd\uc73c\ub85c \uc5d1\uc138\uc2a4 \ud0a4\ub97c \uc81c\uacf5\ud558\uc790.  ")),(0,n.kt)("p",null,"1.2 \uc778\ubc14\uc6b4\ub4dc \uaddc\uce59 \ud3b8\uc811"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Alt text",src:t(83667).Z,width:"2360",height:"1288"}),"  "),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"EC2 \uae30\ubcf8 \uaddc\uce59\uc5d0, \ud604\uc7ac \ub0b4 IP\ub97c \uc778\ubc14\uc6b4\ub4dc \uaddc\uce59\uc73c\ub85c \ud5c8\uc6a9\ud558\uc790.  ")),(0,n.kt)("h2",{id:"ec-\ub9cc\ub4e4\uc5b4\ubcf4\uae30-first-steps"},"EC \ub9cc\ub4e4\uc5b4\ubcf4\uae30 (first-steps)"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("a",{parentName:"p",href:"https://github.com/wardviaene/terraform-course/tree/master/first-steps"},"https://github.com/wardviaene/terraform-course/tree/master/first-steps"),"  ")),(0,n.kt)("p",null,"1.instance.tf"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'provider "aws" {\n  access_key = "AKIAU5LH5U3L2LMYKAFJ"\n  secret_key = "A5o4h5YKJ+xxxxxxxx"\n  region     = "ap-northeast-2"\n}\n\nresource "aws_instance" "example" {\n  ami           = "ami-042e76978adeb8c48"\n  instance_type = "t2.micro"\n}\n---\n\n')),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"AMI(Amazon Machine Image)",(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("a",{parentName:"p",href:"https://cloud-images.ubuntu.com/locator/ec2/"},"https://cloud-images.ubuntu.com/locator/ec2/"),"  ")))),(0,n.kt)("p",null,"AWS AMI(Amazon Machine Image)\ub294 Amazon Web Services\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \uac00\uc0c1 \uba38\uc2e0 \ud15c\ud50c\ub9bf"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"region\ub9c8\ub2e4 \uc9c0\uc6d0\ud558\ub294 \uc774\ubbf8\uc9c0\uac00 \ub2e4\ub974\ub2e4.  "),(0,n.kt)("li",{parentName:"ul"},"\uc6d0\ud558\ub294 ami\ub97c \ucc3e\uc544\uc11c \uc704\uc5d0 \uc5c5\ub370\uc774\ud2b8 \ud558\uc790.  ")),(0,n.kt)("ol",{start:3},(0,n.kt)("li",{parentName:"ol"},"first-steps")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"# \ucd08\uae30\ud654 \ud639\uc740 provider \ubcc0\uacbd\uc774 \uc788\ub2e4\uba74 init\uba85\ub839\uc5b4 \uc218\ud589\ud558\uae30  \nterraform init\nterraform plan\nterraform apply\n\n# \ud504\ub85c\ub355\uc158 \ud658\uacbd\uc5d0\uc11c\ub294 \uad49\uc7a5\ud788 \uc870\uc2ec\ud574\uc11c \uc0ac\uc6a9\ud560\uac83\nterraform destroy\n\n# \ud504\ub85c\ub355\uc158 \ud658\uacbd\uc5d0\uc11c\ub294 output \ud30c\uc77c\uc744 \uaf2d \uc0ac\uc6a9\ud574\ub77c.  \nterraform plan -out out.terraform # \ucd5c\uc885 output \ud30c\uc77c \ub9cc\ub4e4\uae30   \nterraform apply out.terraform # \uc801\uc6a9  \n")),(0,n.kt)("h2",{id:"\uc720\uc6a9\ud55c-\uba85\ub839\uc5b4"},"\uc720\uc6a9\ud55c \uba85\ub839\uc5b4"),(0,n.kt)("p",null,"$ terraform plan # \uacc4\ud68d\n$ terraform apply # \uacc4\ud68d & \uc801\uc6a9\uc758 \ub2e8\ucd95\ud0a4 - \ud504\ub85c\ub355\uc158 \ud658\uacbd\uc5d0\uc11c\ub294 \uc0ac\uc6a9\ud558\uc9c0 \ub9c8\uc138\uc694.\n$ terraform plan -out out.terraform # \ud14c\ub77c\ud3fc \uacc4\ud68d\uacfc \uacc4\ud68d \uc791\uc131\uc744 \ucd9c\ub825 \ud30c\uc77c\uc5d0 \uc800\uc7a5\n$ terraform apply out.terraform # \ucd9c\ub825 \ud30c\uc77c\uc744 \uc0ac\uc6a9\ud558\uc5ec \ud14c\ub77c\ud3fc \uacc4\ud68d \uc801\uc6a9\n$ terraform show # \ud604\uc7ac \ud14c\ub77c\ud3fc \uc0c1\ud0dc \ud45c\uc2dc\n$ cat terraform.tfstate # \uc81c\uc774\uc2a8(JSON) \ud615\uc2dd\uc73c\ub85c \uc0c1\ud0dc \ud45c\uc2dc"))}c.isMDXComponent=!0},83667:(e,r,t)=>{t.d(r,{Z:()=>a});const a=t.p+"assets/images/image-1-aa9960fdbb4722075c6b8ca77c0392c7.png"},97890:(e,r,t)=>{t.d(r,{Z:()=>a});const a=t.p+"assets/images/image-8c682a23a6a9750928a7cbdd81225a27.png"},30243:(e,r,t)=>{t.d(r,{Z:()=>a});const a=t.p+"assets/images/iam-1-61af9d7d190db092b41c3d78243067fd.png"},48846:(e,r,t)=>{t.d(r,{Z:()=>a});const a=t.p+"assets/images/iam-2-db9bc9d0fdd45fe70d152abae43163ff.png"},60265:(e,r,t)=>{t.d(r,{Z:()=>a});const a=t.p+"assets/images/iam-3-a5970cacd7142617087c174e84d8384c.png"}}]);