"use strict";(self.webpackChunkdosimpact_blog=self.webpackChunkdosimpact_blog||[]).push([[96602],{3905:(e,n,t)=>{t.d(n,{Zo:()=>m,kt:()=>k});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),p=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},m=function(e){var n=p(e.components);return r.createElement(s.Provider,{value:n},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),c=p(t),u=a,k=c["".concat(s,".").concat(u)]||c[u]||d[u]||l;return t?r.createElement(k,o(o({ref:n},m),{},{components:t})):r.createElement(k,o({ref:n},m))}));function k(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=t.length,o=new Array(l);o[0]=u;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[c]="string"==typeof e?e:a,o[1]=i;for(var p=2;p<l;p++)o[p]=t[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},34641:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>p});var r=t(87462),a=(t(67294),t(3905));const l={sidebar_position:2},o="Nginx \ud658\uacbd\uc124\uc815 (Proxy)",i={unversionedId:"g-devops/common/nginx/nginx-002",id:"g-devops/common/nginx/nginx-002",title:"Nginx \ud658\uacbd\uc124\uc815 (Proxy)",description:"Nginx\uc744 Proxy\uc73c\ub85c \ub3c4\uba54\uc778\uc744 \uc5f0\uacb0\ud574\uc11c \uc0ac\uc6a9\ud55c\ub2e4.",source:"@site/docs/g-devops/0-common/2-nginx/nginx-002.md",sourceDirName:"g-devops/0-common/2-nginx",slug:"/g-devops/common/nginx/nginx-002",permalink:"/docs/g-devops/common/nginx/nginx-002",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/g-devops/0-common/2-nginx/nginx-002.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"devOps",previous:{title:"Nginx \uc124\uce58",permalink:"/docs/g-devops/common/nginx/nginx-001"},next:{title:"git",permalink:"/docs/category/git"}},s={},p=[{value:"1.nginx \uc124\uc815 \ud30c\uc77c\uc758 \uad6c\uc870",id:"1nginx-\uc124\uc815-\ud30c\uc77c\uc758-\uad6c\uc870",level:2},{value:"\ud3ec\ud2b8 \uc870\uac74",id:"\ud3ec\ud2b8-\uc870\uac74",level:3},{value:"\ub3c4\uba54\uc778 \uc870\uac74",id:"\ub3c4\uba54\uc778-\uc870\uac74",level:3},{value:"2.\ub514\ud3f4\ud2b8 \uc11c\ubc84 \ube14\ub85d",id:"2\ub514\ud3f4\ud2b8-\uc11c\ubc84-\ube14\ub85d",level:2},{value:"3.\ub3c4\uba54\uc778\ubcc4 \ubd84\uae30 \ucc98\ub9ac",id:"3\ub3c4\uba54\uc778\ubcc4-\ubd84\uae30-\ucc98\ub9ac",level:2},{value:"Usage",id:"usage",level:3},{value:"4.https\ub85c \ub9ac\ub2e4\uc774\ub809\uc158 \ucc98\ub9ac",id:"4https\ub85c-\ub9ac\ub2e4\uc774\ub809\uc158-\ucc98\ub9ac",level:2},{value:"usage",id:"usage-1",level:3},{value:"5.\uc124\uc815\ud30c\uc77c \ubd84\ub9ac\ud558\uae30",id:"5\uc124\uc815\ud30c\uc77c-\ubd84\ub9ac\ud558\uae30",level:2},{value:"6-1.\ud2b9\uc815 \uacbd\ub85c\ub85c \uc811\uadfc\uc2dc, \uc815\uc801\ud30c\uc77c\ub4e4 \uc81c\uacf5\ud558\uae30",id:"6-1\ud2b9\uc815-\uacbd\ub85c\ub85c-\uc811\uadfc\uc2dc-\uc815\uc801\ud30c\uc77c\ub4e4-\uc81c\uacf5\ud558\uae30",level:2},{value:"6-2.\ud2b9\uc815 \uacbd\ub85c\ub85c \uc811\uadfc\uc2dc, \ud2b9\uc815 \ud30c\uc77c \uc81c\uacf5\ud558\uae30",id:"6-2\ud2b9\uc815-\uacbd\ub85c\ub85c-\uc811\uadfc\uc2dc-\ud2b9\uc815-\ud30c\uc77c-\uc81c\uacf5\ud558\uae30",level:2},{value:"\uc608) CodeServer\uc5d0 Nginx Proxy \uc124\uc815\ud558\uae30 (+https)",id:"\uc608-codeserver\uc5d0-nginx-proxy-\uc124\uc815\ud558\uae30-https",level:2},{value:"proxy \uc635\uc158 details",id:"proxy-\uc635\uc158-details",level:3},{value:"\uae30\ud0c0 \uc124\uc815\ub4e4",id:"\uae30\ud0c0-\uc124\uc815\ub4e4",level:2},{value:"client_max_body_size",id:"client_max_body_size",level:3},{value:"access_log, error_log",id:"access_log-error_log",level:3}],m={toc:p},c="wrapper";function d(e){let{components:n,...t}=e;return(0,a.kt)(c,(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"nginx-\ud658\uacbd\uc124\uc815-proxy"},"Nginx \ud658\uacbd\uc124\uc815 (Proxy)"),(0,a.kt)("p",null,"Nginx\uc744 Proxy\uc73c\ub85c \ub3c4\uba54\uc778\uc744 \uc5f0\uacb0\ud574\uc11c \uc0ac\uc6a9\ud55c\ub2e4.  "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\ub530\ub77c\uc11c \ub3c4\uba54\uc778\uc774 \uc5c6\uc73c\uba74 ping \uc751\ub2f5\ub9cc \uc8fc\ub3c4\ub85d \ubc14\uafb8\uc790.  ")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"#nginx-%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95-proxy"},"Nginx \ud658\uacbd\uc124\uc815 (Proxy)")),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#1nginx-%EC%84%A4%EC%A0%95-%ED%8C%8C%EC%9D%BC%EC%9D%98-%EA%B5%AC%EC%A1%B0"},"1.nginx \uc124\uc815 \ud30c\uc77c\uc758 \uad6c\uc870"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#%ED%8F%AC%ED%8A%B8-%EC%A1%B0%EA%B1%B4"},"\ud3ec\ud2b8 \uc870\uac74")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#%EB%8F%84%EB%A9%94%EC%9D%B8-%EC%A1%B0%EA%B1%B4"},"\ub3c4\uba54\uc778 \uc870\uac74")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#2%EB%94%94%ED%8F%B4%ED%8A%B8-%EC%84%9C%EB%B2%84-%EB%B8%94%EB%A1%9D"},"2.\ub514\ud3f4\ud2b8 \uc11c\ubc84 \ube14\ub85d")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#3%EB%8F%84%EB%A9%94%EC%9D%B8%EB%B3%84-%EB%B6%84%EA%B8%B0-%EC%B2%98%EB%A6%AC"},"3.\ub3c4\uba54\uc778\ubcc4 \ubd84\uae30 \ucc98\ub9ac"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#usage"},"Usage")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#4https%EB%A1%9C-%EB%A6%AC%EB%8B%A4%EC%9D%B4%EB%A0%89%EC%85%98-%EC%B2%98%EB%A6%AC"},"4.https\ub85c \ub9ac\ub2e4\uc774\ub809\uc158 \ucc98\ub9ac"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#usage-1"},"usage")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#5%EC%84%A4%EC%A0%95%ED%8C%8C%EC%9D%BC-%EB%B6%84%EB%A6%AC%ED%95%98%EA%B8%B0"},"5.\uc124\uc815\ud30c\uc77c \ubd84\ub9ac\ud558\uae30")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#6-1%ED%8A%B9%EC%A0%95-%EA%B2%BD%EB%A1%9C%EB%A1%9C-%EC%A0%91%EA%B7%BC%EC%8B%9C-%EC%A0%95%EC%A0%81%ED%8C%8C%EC%9D%BC%EB%93%A4-%EC%A0%9C%EA%B3%B5%ED%95%98%EA%B8%B0"},"6-1.\ud2b9\uc815 \uacbd\ub85c\ub85c \uc811\uadfc\uc2dc, \uc815\uc801\ud30c\uc77c\ub4e4 \uc81c\uacf5\ud558\uae30")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#6-2%ED%8A%B9%EC%A0%95-%EA%B2%BD%EB%A1%9C%EB%A1%9C-%EC%A0%91%EA%B7%BC%EC%8B%9C-%ED%8A%B9%EC%A0%95-%ED%8C%8C%EC%9D%BC-%EC%A0%9C%EA%B3%B5%ED%95%98%EA%B8%B0"},"6-2.\ud2b9\uc815 \uacbd\ub85c\ub85c \uc811\uadfc\uc2dc, \ud2b9\uc815 \ud30c\uc77c \uc81c\uacf5\ud558\uae30")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#%EC%98%88-codeserver%EC%97%90-nginx-proxy-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0-https"},"\uc608) CodeServer\uc5d0 Nginx Proxy \uc124\uc815\ud558\uae30 (+https)"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#proxy-%EC%98%B5%EC%85%98-details"},"proxy \uc635\uc158 details")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#%EA%B8%B0%ED%83%80-%EC%84%A4%EC%A0%95%EB%93%A4"},"\uae30\ud0c0 \uc124\uc815\ub4e4"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#client_max_body_size"},"client_max_body_size")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"#access_log-error_log"},"access_log, error_log"))))))),(0,a.kt)("h2",{id:"1nginx-\uc124\uc815-\ud30c\uc77c\uc758-\uad6c\uc870"},"1.nginx \uc124\uc815 \ud30c\uc77c\uc758 \uad6c\uc870"),(0,a.kt)("p",null,"nginx \uc124\uc815\ud30c\uc77c\uc740 \uc5ec\ub7ec\uac1c\uc758 \uc11c\ubc84 \ube14\ub85d\ub4e4\ub85c \uad6c\uc131\ub41c\ub2e4.  "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\uc11c\ubc84 \ube14\ub85d\uc740 \ud2b9\uc815 \ud3ec\ud2b8\ub098, \ub3c4\uba54\uc778\uc744 \ub9cc\uc871\ud560 \ub54c \ucc98\ub9ac\ud560 \ubd84\uae30\ubb38\uc774\ub77c\uace0 \ubcf4\uba74\ub41c\ub2e4.  "),(0,a.kt)("li",{parentName:"ul"},"\ud558\ub098\uc758 \ub8e8\ud2b8 \uc124\uc815\ud30c\uc77c\uacfc \ud558\uc704 \uc124\uc815\ud30c\uc77c\ub4e4\ub85c \uad6c\uc131 \uac00\ub2a5  ")),(0,a.kt)("p",null,"\uc11c\ubc84\ube14\ub85d \ub85c\uc9c1\uc744 \ud0dc\uc6b0\ub294 \uc870\uac74\ub4e4\uc758 \uc608  "),(0,a.kt)("h3",{id:"\ud3ec\ud2b8-\uc870\uac74"},"\ud3ec\ud2b8 \uc870\uac74"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"listen 80; http\uc5d0 \ub300\ud574\uc11c \ucc98\ub9ac\ud55c\ub2e4 - https\ub85c \ub9ac\ub2e4\uc774\ub809\ud2b8 \ud574\uc918    "),(0,a.kt)("li",{parentName:"ul"},"listen 443; https\uc5d0 \ub300\ud574\uc11c \ucc98\ub9ac\ud55c\ub2e4. - \ud2b9\uc815 \uc11c\ubc84\ub85c \ub118\uaca8    ")),(0,a.kt)("h3",{id:"\ub3c4\uba54\uc778-\uc870\uac74"},"\ub3c4\uba54\uc778 \uc870\uac74"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"server_name ",(0,a.kt)("a",{parentName:"li",href:"http://www.domain.com"},"www.domain.com"),"; \ud574\ub2f9 \ub3c4\uba54\uc778\uc758 \uacbd\uc6b0\uc5d0\ub9cc \ucc98\ub9ac\ud560\ub798."),(0,a.kt)("li",{parentName:"ul"},"\ub3c4\uba54\uc778 \uc870\uac74\uacfc \ud3ec\ud2b8\uc870\uac74\uc744 \ud569\uccd0\uc11c \ucc98\ub77c\ud560 \uc218 \uc788\ub2e4.  ")),(0,a.kt)("p",null,"Note) DNS A Record\uc5d0\uc11c\ub3c4 \uc11c\ube0c \ub3c4\uba54\uc778\uc5d0 \ub300\ud55c \ucc98\ub9ac\ub97c \ud558\ub294\ub370?  "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\ub3c4\uba54\uc778\uc740 \uba54\uc778\ub3c4\uba54\uc778+\uc11c\ube0c\ub3c4\uba54\uc778 \uad6c\uc870\uc774\ub2e4. (domain.com = \uba54\uc778, www = \uc11c\ube0c)  "),(0,a.kt)("li",{parentName:"ul"},"DNS\ub808\ucf54\ub4dc\uc5d0\uc11c \ud2b9\uc815 \ub3c4\uba54\uc778 \uacbd\uc6b0\uc5d0\ub294 \ub2e4\ub978 IP\ub85c \uc5f0\uacb0\uc774 \uac00\ub2a5\ud558\ub2e4.  ",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"http://www.domain.com"},"www.domain.com")," -> 124.1.1.1  "),(0,a.kt)("li",{parentName:"ul"},"domain.com -> 123.123.123.123  "),(0,a.kt)("li",{parentName:"ul"},"\uadf8 \uc678 \ubaa8\ub4e0 \uc11c\ube0c \ub3c4\uba54\uc778 -> 123.123.123.123  "))),(0,a.kt)("li",{parentName:"ul"},"nginx\uc5d0\uc11c \uc11c\ube0c\ub3c4\uba54\uc778\uc758 \ucc98\ub9ac\ub97c \ub2f4\ub2f9\ud558\ub824\uba74, \uc0c1\uc704 DNS\ub808\ucf54\ub4dc\uc5d0\uc11c \ud638\uc2a4\ud2b8(@)\uc124\uc815\uc744 \uccb4\ud06c\ud574\uc57c \ud55c\ub2e4.  ")),(0,a.kt)("h2",{id:"2\ub514\ud3f4\ud2b8-\uc11c\ubc84-\ube14\ub85d"},"2.\ub514\ud3f4\ud2b8 \uc11c\ubc84 \ube14\ub85d"),(0,a.kt)("p",null,"\uc5b4\ub5a0\ud55c \uc11c\ubc84\ube14\ub85d\uc5d0\ub3c4 \uac78\ub9ac\uc9c0 \uc54a\ub294 \uacbd\uc6b0, \ucc98\ub9ac\ud558\ub294 \ube14\ub85d\uc774 \ub514\ud3f4\ud2b8 \uc11c\ubc84 \ube14\ub85d\uc774\ub2e4.  "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\uacf5\uc778 IP\ub85c \uc9c1\uc811 \uc811\uadfc\ud558\ub294 \uacbd\uc6b0  "),(0,a.kt)("li",{parentName:"ul"},"DDNS\ub85c \uc9c1\uc811 \uc811\uadfc\ud558\ub294 \uacbd\uc6b0  "),(0,a.kt)("li",{parentName:"ul"},"\ud2b9\uc815 \uc11c\ubc84\ube14\ub85d\uc5d0 \uac78\ub9ac\uc9c0 \uc54a\ub294 \uacbd\uc6b0\n\ub4f1 \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \ucd5c\ud6c4\uc758 \uc11c\ubc84 \ube14\ub85d\uc774\ub2e4.  ")),(0,a.kt)("p",null,"\uc8fc\uc758\uc810"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\ub514\ud3f4\ud2b8 \ube14\ub85d\uc774 \uc5c6\ub2e4\uba74 \uac00\uc7a5 \uccab\ubc88\uc9f8 \ube14\ub85d\uc73c\ub85c \uc790\ub3d9\uc73c\ub85c \ucc98\ub9ac\uac00 \ub41c\ub2e4.      "),(0,a.kt)("li",{parentName:"ul"},"\ube0c\ub77c\uc6b0\uc800 \ucc3d\uc5d0\uc11c \ub3c4\uba54\uc778\uc744 \ubc14\ub85c \uc785\ub825\ud558\uba74, https\ub85c \ucc98\ub9ac\ub41c\ub2e4.  ")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-py"},'# default \uc11c\ubc84 \ube14\ub85d\uc758 \uc608\nworker_processes  1;\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n    sendfile        on;\n    keepalive_timeout  65;\n\n    server {\n        listen 80 default_server;\n        # listen 443 ssl default_server;\n        # warn: If you enter domain.com in the browser search box, \n        # it will be displayed as https, and since there is no server block that handles nginx\'s default 443, \n        # it may branch to a different domain server block than expected.\n\n        # _\ub294 \uae00\ub85c\ubc8c \uc2dd\ubcc4\uc790\uc774\ub2e4.\n        server_name _;\n\n        add_header Content-Type text/plain;\n\n        # \uc5b4\ub5a0\ud55c \uc11c\ubc84 \ube14\ub85d\uc5d0\ub77c\ub3c4 \uac78\ub9ac\uc9c0 \uc54a\uc73c\uba74 ok\ub97c \ubcf4\ub0b8\ub2e4.  \n        location / {\n            return 200 "ok";\n        }\n    }\n}\n')),(0,a.kt)("h2",{id:"3\ub3c4\uba54\uc778\ubcc4-\ubd84\uae30-\ucc98\ub9ac"},"3.\ub3c4\uba54\uc778\ubcc4 \ubd84\uae30 \ucc98\ub9ac"),(0,a.kt)("p",null,"\uc544\ub798 \uc11c\ubc84 \ube14\ub85d\uc740 domain.com \ub77c\ub294 \ud2b9\uc815 \ub3c4\uba54\uc778\uc758 \uacbd\uc6b0\uc5d0 \ubc18\uc751\ud55c\ub2e4.  "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"proxy_pass\ub97c \ud1b5\ud574\uc11c \ud504\ub85c\uc138\uc2a4\uc640 \uc5f0\ub3d9\uc774 \uac00\ub2a5\ud558\ub2e4.  "),(0,a.kt)("li",{parentName:"ul"},"code-server \ub4e0, docker container\ub4e0 \ud3ec\ud2b8\ub97c \uc801\uc5b4\uc8fc\uc790.  "),(0,a.kt)("li",{parentName:"ul"},"server_name\uc5d0 \uc870\uac74\uc5d0 \ub9de\ub294 \ub3c4\uba54\uc778\uc744 \uc801\uc5b4\uc900\ub2e4. ")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-py"},"# 80\ud3ec\ud2b8 + \uba54\uc778 \ub3c4\uba54\uc778\uc5d0 \ub300\ud55c \ucc98\ub9ac  \nserver {\n    listen 80 ;\n    server_name domain.com;\n\n    location / {  \n        proxy_pass http://127.0.0.1:3031/;\n    }\n}\n\n")),(0,a.kt)("h3",{id:"usage"},"Usage"),(0,a.kt)("p",null,"\uc608) domain.com \uc811\uc18d\uc2dc \ub9ac\uc561\ud2b8 App \uc2e4\ud589  "),(0,a.kt)("h2",{id:"4https\ub85c-\ub9ac\ub2e4\uc774\ub809\uc158-\ucc98\ub9ac"},"4.https\ub85c \ub9ac\ub2e4\uc774\ub809\uc158 \ucc98\ub9ac"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"http\ub85c \uc811\uadfc\ud558\uba74 80\ud3ec\ud2b8 \uc774\ub2e4. https\ub294 443\ud3ec\ud2b8 \uc774\ub2e4.  "),(0,a.kt)("li",{parentName:"ul"},"80\ud3ec\ud2b8 : HTTPS\ub85c \ub9ac\ub2e4\uc774\ub809\uc158 \ud558\ub294 \uc11c\ubc84\ube14\ub85d\uc744 \uc124\uc815.   "),(0,a.kt)("li",{parentName:"ul"},"server_name\uc5d0 \uc870\uac74\uc5d0 \ub9de\ub294 \ub3c4\uba54\uc778\uc744 \uc801\uc5b4\uc900\ub2e4.  ")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"server {\n    listen 80 ;\n    server_name domain.com;\n\n    location / {  \n        # HTTP to HTTPS \ub9ac\ub514\ub809\uc158\n        return 301 https://$host$request_uri;\n    }\n}\n")),(0,a.kt)("h3",{id:"usage-1"},"usage"),(0,a.kt)("p",null,"\uc608) domain.com \uc811\uc18d\uc2dc https\ub85c \ub9ac\uc561\ud2b8 App \uc2e4\ud589  "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"https \uc778\uc99d\uc11c \ubc1c\uae09\uc774 \ud544\uc694\ud568  ")),(0,a.kt)("h2",{id:"5\uc124\uc815\ud30c\uc77c-\ubd84\ub9ac\ud558\uae30"},"5.\uc124\uc815\ud30c\uc77c \ubd84\ub9ac\ud558\uae30"),(0,a.kt)("p",null,"server \ube14\ub85d\uc774 \ub9ce\uc544\uc9c0\uba74 \uc124\uc815 \ud30c\uc77c\uc758 \uad00\ub9ac\uac00 \uc5b4\ub824\uc6cc\uc9c4\ub2e4.",(0,a.kt)("br",{parentName:"p"}),"\n","\ub610\ud55c \ud2b9\uc815 \ub3c4\uba54\uc778\uc5d0 \ub300\ud55c \uc124\uc815\ud30c\uc77c\uc744 \uad6c\ubd84\ud558\uace0 \uc2f6\uc740 \ub2c8\uc988\ub3c4 \uc788\ub2e4.  "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n    sendfile        on;\n    keepalive_timeout  65;\n\n    # servers \ud558\uc704 \ubaa8\ub4e0 \ud3f4\ub354\ub4e4\uc774 \uc124\uc815\ud30c\uc77c\uc5d0 \ud3ec\ud568\ub41c\ub2e4. \n    include servers/*;\n\n    server {\n        listen 80 default_server;\n        server_name _;\n\n        add_header Content-Type text/plain;\n\n        location / {\n            return 200 "ok";\n        }\n    }\n}\n\n---\n# servers/example.com.conf\n\nserver {\n    server_name example.com example.com;\n\n    access_log /Users/username/log/ghost_example/access.log;\n    error_log /Users/username/log/ghost_example/error.log;\n\n    client_max_body_size 100M;\n\n    listen 443 ssl; # managed by Certbot\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem; # managed by Certbot\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem; # managed by Certbot\n    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot\n    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot\n\n    location ~ ^/ads.txt {\n            root /opt/homebrew/etc/nginx/public;\n            default_type text/plain;\n    }\n\n    location / { \n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Host $host;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_pass http://127.0.0.1:3030/;\n    }\n}\n\nserver {\n    if ($host = example.com) {\n        return 301 https://$host$request_uri;\n    } # managed by Certbot\n\n\n    if ($host = www.example.com) {\n        return 301 https://$host$request_uri;\n    } # managed by Certbot\n\n\n    listen 80;\n    server_name www.example.com example.com;\n    return 404; # managed by Certbot\n\n}\n')),(0,a.kt)("h2",{id:"6-1\ud2b9\uc815-\uacbd\ub85c\ub85c-\uc811\uadfc\uc2dc-\uc815\uc801\ud30c\uc77c\ub4e4-\uc81c\uacf5\ud558\uae30"},"6-1.\ud2b9\uc815 \uacbd\ub85c\ub85c \uc811\uadfc\uc2dc, \uc815\uc801\ud30c\uc77c\ub4e4 \uc81c\uacf5\ud558\uae30"),(0,a.kt)("p",null,"\ub4b7\ub2e8\uc758 \uc11c\ube44\uc2a4\uae4c\uc9c0 \uc5f0\uacb0\ud558\uc9c0 \uc54a\uace0, nginx \ub2e8\uc5d0\uc11c \ud30c\uc77c\uc744 \uc81c\uacf5\ud558\uace0 \ub05d\ub0b4\uace0 \uc2f6\uc740 \uacbd\uc6b0\uac00 \uc788\ub2e4.  "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"    server {\n        listen 80 ;\n        server_name www.domain.com;\n\n        location /.well-known/acme-challenge {\n            alias /opt/homebrew/etc/nginx/.well-known/acme-challenge; # \uc2e4\uc81c \ud30c\uc77c\uc774 \uc704\uce58\ud55c \uacbd\ub85c\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.\n            try_files $uri $uri/ /opt/homebrew/etc/nginx/.well-known/acme-challenge/XGNhKKRm4LMqNgFd3QC3RdI4mGM1ZedPYZiSt0nTCZB; # \ud2b9\uc815 \ud30c\uc77c\uba85\uc744 \uc5ec\uae30\uc5d0 \uc9c0\uc815\ud569\ub2c8\ub2e4.\n        }\n\n        location / {  # HTTP to HTTPS \ub9ac\ub514\ub809\uc158\n            return 301 https://$host$request_uri;\n        }\n    }\n")),(0,a.kt)("p",null,"\uc608)\n",(0,a.kt)("a",{parentName:"p",href:"https://www.domain.com/.well-known/acme-challenge"},"https://www.domain.com/.well-known/acme-challenge")," -> Not found.\n",(0,a.kt)("a",{parentName:"p",href:"https://www.domain.com/.well-known/acme-challenge/XGNhKKRm4LMqNgFd3QC3RdI4mGM1ZedPYZiSt0nTCZB"},"https://www.domain.com/.well-known/acme-challenge/XGNhKKRm4LMqNgFd3QC3RdI4mGM1ZedPYZiSt0nTCZB")," -> \ud30c\uc77c \ub2e4\uc6b4"),(0,a.kt)("h2",{id:"6-2\ud2b9\uc815-\uacbd\ub85c\ub85c-\uc811\uadfc\uc2dc-\ud2b9\uc815-\ud30c\uc77c-\uc81c\uacf5\ud558\uae30"},"6-2.\ud2b9\uc815 \uacbd\ub85c\ub85c \uc811\uadfc\uc2dc, \ud2b9\uc815 \ud30c\uc77c \uc81c\uacf5\ud558\uae30"),(0,a.kt)("p",null,"\uc704 \uacbd\uc6b0\ubcf4\ub2e4 \uc881\uc740 \uc124\uc815\uc774\ub2e4. \ud3f4\ub354 \uc790\uccb4\ub97c \uc81c\uacf5\ud558\ub294 \uac83\uc774 \uc544\ub2cc \ud30c\uc77c\uc744 \uba85\uc2dc\ud574\uc11c \uc81c\uacf5\ud55c\ub2e4.  "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"server {\n    server_name domain.com;\n\n    client_max_body_size 100M;\n\n    listen 443 ssl; # managed by Certbot\n    ssl_certificate /etc/letsencrypt/live/domain.com/fullchain.pem; # managed by Certbot\n    ssl_certificate_key /etc/letsencrypt/live/domain.com/privkey.pem; # managed by Certbot\n    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot\n    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot\n\n    # \uacbd\ub85c+\ud30c\uc77c\uae4c\uc9c0 \uc77c\uce58\ud558\uba74 \uc544\ub798 location \ube14\ub85d\uc744 \uc2e4\ud589\ud55c\ub2e4.  \n    location ~ ^/ads.txt {\n            root /opt/homebrew/etc/nginx/public/domain.com;\n            default_type text/plain;\n    }\n\n    location / { \n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Host $host;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_pass http://127.0.0.1:3036/;\n    }\n}\n")),(0,a.kt)("p",null,"\uc608)",(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("a",{parentName:"p",href:"https://domain.com/ads.txt"},"https://domain.com/ads.txt")," -> \ud14d\uc2a4\ud2b8 \ud30c\uc77c \uc81c\uacf5"),(0,a.kt)("h2",{id:"\uc608-codeserver\uc5d0-nginx-proxy-\uc124\uc815\ud558\uae30-https"},"\uc608) CodeServer\uc5d0 Nginx Proxy \uc124\uc815\ud558\uae30 (+https)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n    sendfile        on;\n    keepalive_timeout  65;\n\n    include servers/*;\n\n    # vscode\n    server {\n        listen 443 ssl; \n        server_name code.domain.site; \n        ssl_certificate /etc/letsencrypt/live/code.domain.site/fullchain.pem; \n        ssl_certificate_key /etc/letsencrypt/live/code.domain.site/privkey.pem; \n\n        # SSL \uc124\uc815 \ucd94\uac00 (optional, \ucd94\ucc9c)\n        ssl_protocols TLSv1.2 TLSv1.3;\n        ssl_ciphers 'TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384';\n        # ssl_prefer_server_ciphers off;\n        # ssl_session_timeout 1d;\n        # ssl_session_cache shared:SSL:50m;\n\n\n        location / {\n            proxy_pass http://127.0.0.1:2229;           \n            proxy_set_header Upgrade $http_upgrade;\n            proxy_set_header Connection upgrade;\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n        }   \n    }\n\n    server {\n        listen 80 ;\n        server_name code.domain.site;\n\n        location /.well-known/acme-challenge {\n            alias /opt/homebrew/etc/nginx/.well-known/acme-challenge; # \uc2e4\uc81c \ud30c\uc77c\uc774 \uc704\uce58\ud55c \uacbd\ub85c\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.\n            try_files $uri $uri/ /opt/homebrew/etc/nginx/.well-known/acme-challenge/XGNhDLRm4LMqNgFd3QC3RdI4mGM1ZedPYZiSt0nTCUY; # \ud2b9\uc815 \ud30c\uc77c\uba85\uc744 \uc5ec\uae30\uc5d0 \uc9c0\uc815\ud569\ub2c8\ub2e4.\n        }\n\n        location / {  # HTTP to HTTPS \ub9ac\ub514\ub809\uc158\n            return 301 https://$host$request_uri;\n        }\n    }\n\n    # catch all server\n    # nginx always has a default server. \n    # In the absence of any server block explicitly marked as default_server, nginx will use the first server with a matching listen directive.\n    server {\n        listen 80 default_server;\n        # listen 443 ssl default_server;\n        # warn: If you enter domain.com in the browser search box, \n        # it will be displayed as https, and since there is no server block that handles nginx's default 443, \n        # it may branch to a different domain server block than expected.\n\n        server_name _;\n\n        add_header Content-Type text/plain;\n\n        location / {\n            # \uae30\ubcf8 \ub3c4\uba54\uc778\uc774\ub098 \ub3c4\uba54\uc778\uc774 \uc5c6\ub294 \uacbd\uc6b0\uc758 \uc124\uc815 \ucd94\uac00\n            return 200 \"ok\";\n        }\n    }\n}\n\n# nginx -t\n# brew services restart nginx\n# sudo chmod -R 755 /etc/letsencrypt\n")),(0,a.kt)("h3",{id:"proxy-\uc635\uc158-details"},"proxy \uc635\uc158 details"),(0,a.kt)("p",null,"\uc704\uc758 nginx \uc124\uc815 \uc635\uc158\ub4e4\uc740 \uc8fc\ub85c \ud504\ub85d\uc2dc \uc11c\ubc84\ub97c \uc124\uc815\ud560 \ub54c \uc0ac\uc6a9\ub418\ub294 \ud5e4\ub354\ub4e4\uc744 \uc815\uc758\ud558\ub294 \uac83\uc785\ub2c8\ub2e4. \uac01 \uc635\uc158\ub4e4\uc740 \ub2e4\uc74c\uacfc \uac19\uc740 \uc5ed\ud560\uc744 \ud569\ub2c8\ub2e4:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"proxy_set_header Upgrade $http_upgrade;"),": \ud074\ub77c\uc774\uc5b8\ud2b8\uc640 \uc11c\ubc84 \uac04\uc758 \uc5f0\uacb0\uc744 \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\ub294\ub370 \ud544\uc694\ud55c \ud5e4\ub354\ub97c \uc124\uc815\ud569\ub2c8\ub2e4. \ubcf4\ud1b5 \uc6f9\uc18c\ucf13\uacfc \uac19\uc740 \uc591\ubc29\ud5a5 \ud1b5\uc2e0\uc744 \uc704\ud574 \uc0ac\uc6a9\ub429\ub2c8\ub2e4."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"proxy_set_header Connection upgrade;"),": \uc5f0\uacb0\uc774 \uc5c5\uadf8\ub808\uc774\ub4dc\ub418\uc5b4\uc57c \ud568\uc744 \uc11c\ubc84\uc5d0\uac8c \uc54c\ub9ac\uae30 \uc704\ud55c \ud5e4\ub354\ub97c \uc124\uc815\ud569\ub2c8\ub2e4.")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\uc6f9\uc18c\ucf13 \uad00\ub828 Proxy \uc124\uc815")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"proxy_set_header Host $host;"),": \uc6d0\uaca9 \uc11c\ubc84\ub85c \uc804\uc1a1\ub418\ub294 \uc694\uccad \ud5e4\ub354\uc5d0 \ud638\uc2a4\ud2b8 \uc815\ubcf4\ub97c \ucd94\uac00\ud569\ub2c8\ub2e4. \uc774\ub294 \uac00\uc0c1 \ud638\uc2a4\ud305\ub41c \uc5ec\ub7ec \ub3c4\uba54\uc778\uc744 \ucc98\ub9ac\ud558\ub294\ub370 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4.")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \ucd5c\ucd08\uc811\uc18d\ud55c \ud638\uc2a4\ud2b8 \uc815\ubcf4\ub97c \uc804\ub2ec\ud55c\ub2e4. \uadf8\ub798\uc57c redirect\uac19\uc740 \uc774\uc288\uac00 \uc5c6\ub2e4. ")),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"proxy_set_header X-Real-IP $remote_addr;"),": \uc6d0\uaca9 \uc11c\ubc84\uc5d0 \uc804\ub2ec\ub418\ub294 \uc694\uccad \ud5e4\ub354\uc5d0 \uc2e4\uc81c \ud074\ub77c\uc774\uc5b8\ud2b8\uc758 IP \uc8fc\uc18c\ub97c \ucd94\uac00\ud569\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \uc6d0\uaca9 \uc11c\ubc84\uc5d0\uc11c \ud074\ub77c\uc774\uc5b8\ud2b8\uc758 \uc2e4\uc81c IP \uc8fc\uc18c\ub97c \uc2dd\ubcc4\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\uc624\ub9ac\uc9c0\ub0a0 \ud074\ub77c\uc774\uc5b8\ud2b8 IP\ub294 ? ")),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;"),": \ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \uc11c\ubc84\ub85c \uc804\ub2ec\ub418\ub294 \uc694\uccad \ud5e4\ub354\uc5d0 \ud074\ub77c\uc774\uc5b8\ud2b8\uc758 \uc804\ub2ec\ub41c IP \uc8fc\uc18c \ubaa9\ub85d\uc744 \ucd94\uac00\ud569\ub2c8\ub2e4. \uc5ec\ub7ec \uc911\uac1c \uc11c\ubc84\ub97c \ud1b5\uacfc\ud55c \uacbd\uc6b0, \uc774\ub97c \ud1b5\ud574 \ud074\ub77c\uc774\uc5b8\ud2b8\uc758 \uc2e4\uc81c IP \uc8fc\uc18c\ub97c \uc2dd\ubcc4\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\uc5b4\ub5a4 \ud504\ub85d\uc2dc\ub4e4\uc744 \uac70\ucc98\uc654\ub294\uac00? IP \ubaa9\ub85d\ub4e4  ")),(0,a.kt)("ol",{start:6},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"proxy_set_header X-Forwarded-Proto $scheme;"),": \ud074\ub77c\uc774\uc5b8\ud2b8\uc640 \uc11c\ubc84 \uac04\uc758 \ud504\ub85c\ud1a0\ucf5c\uc744 \uc2dd\ubcc4\ud558\ub294\ub370 \uc0ac\uc6a9\ub429\ub2c8\ub2e4. \uc774 \ud5e4\ub354\ub97c \ud1b5\ud574 \uc11c\ubc84\ub294 \ud074\ub77c\uc774\uc5b8\ud2b8\uac00 HTTPS\ub97c \ud1b5\ud574 \uc811\uc18d\ud588\ub294\uc9c0 \uc5ec\ubd80\ub97c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"https \uc811\uadfc\ud588\ub294\uac00?")),(0,a.kt)("h2",{id:"\uae30\ud0c0-\uc124\uc815\ub4e4"},"\uae30\ud0c0 \uc124\uc815\ub4e4"),(0,a.kt)("h3",{id:"client_max_body_size"},"client_max_body_size"),(0,a.kt)("p",null,"\ud070 \ud30c\uc77c \uc5c5\ub85c\ub4dc\uac00 \uc2e4\ud328\ud558\ub294 \uacbd\uc6b0, bodySize \uc81c\ud55c\uc744 \uc870\uc815\ud558\uc790.  "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"client_max_body_size 100M;\n")),(0,a.kt)("h3",{id:"access_log-error_log"},"access_log, error_log"),(0,a.kt)("p",null,"\uc811\uc18d \ub85c\uadf8\ub97c \ub0a8\uae30\uc790. "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"    access_log /Users/user_name/log/ghost_example/access.log;\n    error_log /Users/user_name/log/ghost_example/error.log;\n")))}d.isMDXComponent=!0}}]);