"use strict";(self.webpackChunkdosimpact_blog=self.webpackChunkdosimpact_blog||[]).push([[25513],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>f});var r=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=r.createContext({}),u=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},d=function(e){var n=u(e.components);return r.createElement(l.Provider,{value:n},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),c=u(t),m=o,f=c["".concat(l,".").concat(m)]||c[m]||p[m]||a;return t?r.createElement(f,s(s({ref:n},d),{},{components:t})):r.createElement(f,s({ref:n},d))}));function f(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,s=new Array(a);s[0]=m;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i[c]="string"==typeof e?e:o,s[1]=i;for(var u=2;u<a;u++)s[u]=t[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},75006:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>u});var r=t(87462),o=(t(67294),t(3905));const a={sidebar_position:1},s="Hooks Snippets",i={unversionedId:"g-fe/react/snippets/snip01-hooks",id:"g-fe/react/snippets/snip01-hooks",title:"Hooks Snippets",description:"- Hooks Snippets",source:"@site/docs/g-fe/4-react/2-snippets/snip01-hooks.md",sourceDirName:"g-fe/4-react/2-snippets",slug:"/g-fe/react/snippets/snip01-hooks",permalink:"/docs/g-fe/react/snippets/snip01-hooks",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/g-fe/4-react/2-snippets/snip01-hooks.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"frontEnd",previous:{title:"Basic Snippets",permalink:"/docs/g-fe/react/snippets/snip00"},next:{title:"Zustand",permalink:"/docs/category/zustand"}},l={},u=[{value:"useShadowDOM",id:"useshadowdom",level:2},{value:"Shadow DOM \uac1c\ub150",id:"shadow-dom-\uac1c\ub150",level:3},{value:"\uc608\uc81c",id:"\uc608\uc81c",level:3},{value:"\uc608\uc81c with React",id:"\uc608\uc81c-with-react",level:3},{value:"\uc608\uc81c with React + StyledComponent",id:"\uc608\uc81c-with-react--styledcomponent",level:3},{value:"useBreakpoint",id:"usebreakpoint",level:2},{value:"usePortal (dynamic target DOM)",id:"useportal-dynamic-target-dom",level:2},{value:"useClickOutside",id:"useclickoutside",level:2},{value:"useIntersectionObserver",id:"useintersectionobserver",level:2},{value:"useFadeIn",id:"usefadein",level:2}],d={toc:u},c="wrapper";function p(e){let{components:n,...t}=e;return(0,o.kt)(c,(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"hooks-snippets"},"Hooks Snippets"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#hooks-snippets"},"Hooks Snippets"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#useshadowdom"},"useShadowDOM"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#shadow-dom-%EA%B0%9C%EB%85%90"},"Shadow DOM \uac1c\ub150")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#%EC%98%88%EC%A0%9C"},"\uc608\uc81c")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#%EC%98%88%EC%A0%9C-with-react"},"\uc608\uc81c with React")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#%EC%98%88%EC%A0%9C-with-react--styledcomponent"},"\uc608\uc81c with React + StyledComponent")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#usebreakpoint"},"useBreakpoint")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#useportal-dynamic-target-dom"},"usePortal (dynamic target DOM)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#useclickoutside"},"useClickOutside")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#useintersectionobserver"},"useIntersectionObserver")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"#usefadein"},"useFadeIn"))))),(0,o.kt)("h2",{id:"useshadowdom"},"useShadowDOM"),(0,o.kt)("h3",{id:"shadow-dom-\uac1c\ub150"},"Shadow DOM \uac1c\ub150"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\uc6f9 \uac1c\ubc1c\uc790\ub4e4\uc774 \uc790\uc2e0\uc758 HTML \uc694\uc18c\uc5d0 \ucea1\uc290\ud654\ub97c \uc801\uc6a9"),(0,o.kt)("li",{parentName:"ul"},"\ucef4\ud3ec\ub10c\ud2b8\uc758 \uc2a4\ud0c0\uc77c\uacfc \uad6c\uc870\ub97c \uc678\ubd80\ub85c\ubd80\ud130 \ub3c5\ub9bd\uc801\uc73c\ub85c \uc720\uc9c0")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"\ucea1\uc290\ud654:")," \uc2a4\ud0c0\uc77c\uacfc \uad6c\uc870\ub97c \ub3c5\ub9bd\uc801\uc73c\ub85c \uc720\uc9c0\ud558\uc5ec \ub2e4\ub978 \ucf54\ub4dc\uc640\uc758 \ucda9\ub3cc\uc744 \ubc29\uc9c0\ud569\ub2c8\ub2e4."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"\uc7ac\uc0ac\uc6a9\uc131:")," \uc790\uccb4\uc801\uc778 \uc2a4\ud0c0\uc77c\uacfc \uad6c\uc870\ub97c \uac00\uc9c4 \ub3c5\ub9bd\uc801\uc778 \ucef4\ud3ec\ub10c\ud2b8\ub97c \uc27d\uac8c \uc7ac\uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"\uc720\uc9c0\ubcf4\uc218\uc131:")," \ucea1\uc290\ud654\ub41c \ucef4\ud3ec\ub10c\ud2b8\ub294 \ubcc0\uacbd \uc2dc \ub2e4\ub978 \ubd80\ubd84\uc5d0 \uc601\ud5a5\uc744 \uc8fc\uc9c0 \uc54a\uc544 \uc720\uc9c0\ubcf4\uc218\uac00 \uc6a9\uc774\ud569\ub2c8\ub2e4.")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},'Shadow Tree: Shadow DOM\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc0dd\uc131\ub41c DOM \ud2b8\ub9ac\ub294 "shadow tree"\ub77c\uace0 \ubd88\ub9ac\uba70, \ud638\uc2a4\ud2b8 \uc694\uc18c\uc758 \uc77c\ubc18 DOM \ud2b8\ub9ac\uc640\ub294 \ubcc4\ub3c4\ub85c \uc874\uc7ac\ud569\ub2c8\ub2e4.  '),(0,o.kt)("li",{parentName:"ul"},'Shadow Host: Shadow tree\uac00 \ubd80\ucc29\ub418\ub294 \uc694\uc18c\ub97c "shadow host"\ub77c\uace0 \ud569\ub2c8\ub2e4. \uc774 \ud638\uc2a4\ud2b8\ub294 shadow tree\ub97c \ud3ec\ud568\ud558\uc9c0\ub9cc, \uc678\ubd80\uc5d0\uc11c\ub294 \uc774 \ub0b4\ubd80 \uad6c\uc870\uc5d0 \uc811\uadfc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.  '),(0,o.kt)("li",{parentName:"ul"},'Shadow Root: Shadow tree\uc758 \ub8e8\ud2b8 \uc694\uc18c\ub97c "shadow root"\ub77c\uace0 \ud558\uba70, \uc774\ub97c \ud1b5\ud574 shadow tree\uac00 \uc5f0\uacb0\ub429\ub2c8\ub2e4.  ')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"\ubaa8\ub4dc(Mode):")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"open \ubaa8\ub4dc:")," \uc678\ubd80 \uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8 \ucf54\ub4dc\uac00 shadow root\uc5d0 \uc811\uadfc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"closed \ubaa8\ub4dc:")," \uc678\ubd80 \uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8 \ucf54\ub4dc\uac00 shadow root\uc5d0 \uc811\uadfc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")),(0,o.kt)("h3",{id:"\uc608\uc81c"},"\uc608\uc81c"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},"<body>\n  <div id=\"shadow-host\">This is a shadow host.</div>\n  <script>\n    // Shadow Host \uc694\uc18c\ub97c \uc120\ud0dd\ud569\ub2c8\ub2e4.\n    const shadowHost = document.getElementById('shadow-host');\n    // Shadow Root\ub97c open \ubaa8\ub4dc\ub85c \uc0dd\uc131\ud569\ub2c8\ub2e4.\n    const shadowRoot = shadowHost.attachShadow({ mode: 'open' });\n\n    // Shadow DOM \ub0b4\ubd80\uc5d0 \uc0c8\ub85c\uc6b4 \ucf58\ud150\uce20\ub97c \ucd94\uac00\ud569\ub2c8\ub2e4.\n    shadowRoot.innerHTML = `\n      <style>\n        p {\n          color: red;\n        }\n      </style>\n      <p>This is inside the shadow DOM.</p>\n    `;\n  <\/script>\n</body>\n</html>\n")),(0,o.kt)("h3",{id:"\uc608\uc81c-with-react"},"\uc608\uc81c with React"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// 2\ubc88 \ubd99\ub294\ub2e4\uace0 \ubcf4\uba74\ub41c\ub2e4.  \n// - 1. \ud2b9\uc815 Html \uc694\uc18c\uc5d0 shadow Tree\ub97c \ub9cc\ub4e4\uc5b4\uc11c \ubd99\uc774\ub294 \uc791\uc5c5 ( shadow host tag  - shadow root tag )  \n// - 2. shadow root tag\uc5d0 \ub9ac\uc561\ud2b8 \ucef4\ud3ec\ub10c\ud2b8\ub97c \ubd99\uc774\ub294 \uc791\uc5c5  \nimport React, { useRef, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\n\n// Shadow DOM\uc744 \uc0dd\uc131\ud558\uace0 React \ucef4\ud3ec\ub10c\ud2b8\ub97c \ub80c\ub354\ub9c1\ud558\ub294 \ucee4\uc2a4\ud140 \ud6c5\nfunction useShadowDOM() {\n  const shadowHostRef = useRef(null);\n  const shadowRootRef = useRef(null);\n\n  useEffect(() => {\n    if (shadowHostRef.current) {\n      // 1.shadowRootRef\ub294 \uc774\uc81c\ubd80\ud130 Tree\uc758 \ucd5c\uc0c1\ub2e8\uc73c\ub85c \uc5ed\ud560 \ubd80\uc5ec\n      shadowRootRef.current = shadowHostRef.current.attachShadow({ mode: 'open' }); \n    }\n  }, []);\n\n  return [shadowHostRef, shadowRootRef];\n}\n---\nconst ShadowComponent = ({ children }) => {\n  const [shadowHostRef, shadowRootRef] = useShadowDOM();\n\n  useEffect(() => {\n    if (shadowRootRef.current) {\n      ReactDOM.render(children, shadowRootRef.current);\n    }\n  }, [children, shadowRootRef]);\n\n  return <div ref={shadowHostRef}></div>;\n};\n---\nconst InnerComponent = () => {\n  return (\n    <div>\n      <p style={{ color: 'red' }}>Hello from the Shadow DOM!</p>\n    </div>\n  );\n};\n\nconst App = () => {\n  return (\n    <div>\n      <h1>Main App</h1>\n      <ShadowComponent>\n        <InnerComponent />\n      </ShadowComponent>\n    </div>\n  );\n};\n\nexport default App;\n\n")),(0,o.kt)("h3",{id:"\uc608\uc81c-with-react--styledcomponent"},"\uc608\uc81c with React + StyledComponent"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"import React, { useRef, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport styled, { StyleSheetManager } from 'styled-components';\n\n// Shadow DOM\uc744 \uc0dd\uc131\ud558\uace0 React \ucef4\ud3ec\ub10c\ud2b8\ub97c \ub80c\ub354\ub9c1\ud558\ub294 \ucee4\uc2a4\ud140 \ud6c5\nfunction useShadowDOM() {\n  const shadowHostRef = useRef(null);\n  const shadowRootRef = useRef(null);\n\n  useEffect(() => {\n    if (shadowHostRef.current) {\n      shadowRootRef.current = shadowHostRef.current.attachShadow({ mode: 'open' });\n    }\n  }, []);\n\n  return [shadowHostRef, shadowRootRef];\n}\n\nconst ShadowComponent = ({ children }) => {\n  const [shadowHostRef, shadowRootRef] = useShadowDOM();\n\n  useEffect(() => {\n    if (shadowRootRef.current) {\n      ReactDOM.render(\n        <StyleSheetManager target={shadowRootRef.current}>\n          {children}\n        </StyleSheetManager>,\n        shadowRootRef.current\n      );\n    }\n  }, [children, shadowRootRef]);\n\n  return <div ref={shadowHostRef}></div>;\n};\n\nconst StyledParagraph = styled.p`\n  color: red;\n`;\n\nconst InnerComponent = () => {\n  return (\n    <div>\n      <StyledParagraph>Hello from the Shadow DOM!</StyledParagraph>\n    </div>\n  );\n};\n\nconst App = () => {\n  return (\n    <div>\n      <h1>Main App</h1>\n      <ShadowComponent>\n        <InnerComponent />\n      </ShadowComponent>\n    </div>\n  );\n};\n\nexport default App;\n\n")),(0,o.kt)("h2",{id:"usebreakpoint"},"useBreakpoint"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"throttling : ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/lodash/lodash/blob/4.17.21-es/throttle.js"},"https://github.com/lodash/lodash/blob/4.17.21-es/throttle.js"),"  ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"import { useEffect, useState } from 'react';\n\n// \ube0c\ub808\uc774\ud06c\ud3ec\uc778\ud2b8 \ud0c0\uc785 \uc815\uc758\ntype Breakpoint = 'mobile' | 'tablet' | 'desktop';\n\n// \ube0c\ub808\uc774\ud06c\ud3ec\uc778\ud2b8 \uc815\uc758\nconst breakpoints = {\n  mobile: 0,\n  tablet: 768,\n  desktop: 1024,\n};\n\n// \ud604\uc7ac \ubdf0\ud3ec\ud2b8\uc5d0 \ub530\ub77c \ube0c\ub808\uc774\ud06c\ud3ec\uc778\ud2b8\ub97c \ubc18\ud658\ud558\ub294 \ud568\uc218\nconst getBreakpoint = (width: number): Breakpoint => {\n  if (width < breakpoints.tablet) return 'mobile';\n  if (width < breakpoints.desktop) return 'tablet';\n  return 'desktop';\n};\n\n// \uc4f0\ub85c\ud2c0\ub9c1 \uc720\ud2f8\ub9ac\ud2f0 \ud568\uc218\nconst throttle = (func: (...args: any[]) => void, limit: number) => {\n  let lastFunc: ReturnType<typeof setTimeout>;\n  let lastRan: number;\n\n  return function (...args: any[]) {\n    if (!lastRan) {\n      func(...args);\n      lastRan = Date.now();\n    } else {\n      clearTimeout(lastFunc);\n      lastFunc = setTimeout(function () {\n        if ((Date.now() - lastRan) >= limit) {\n          func(...args);\n          lastRan = Date.now();\n        }\n      }, limit - (Date.now() - lastRan));\n    }\n  };\n};\n\n// useBreakpoint \ud6c5 \uc815\uc758\nconst useBreakpoint = (): Breakpoint => {\n  const [breakpoint, setBreakpoint] = useState<Breakpoint>(getBreakpoint(window.innerWidth));\n\n  useEffect(() => {\n    const handleResize = throttle(() => {\n      setBreakpoint(getBreakpoint(window.innerWidth));\n    }, 200); // 200ms \uc4f0\ub85c\ud2c0\ub9c1\n\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  return breakpoint;\n};\n\nexport default useBreakpoint;\n---\nimport React from 'react';\nimport useBreakpoint from './useBreakpoint';\n\nconst MyResponsiveComponent: React.FC = () => {\n  const breakpoint = useBreakpoint();\n\n  return (\n    <div>\n      {breakpoint === 'mobile' && <p>Mobile View</p>}\n      {breakpoint === 'tablet' && <p>Tablet View</p>}\n      {breakpoint === 'desktop' && <p>Desktop View</p>}\n    </div>\n  );\n};\n\nexport default MyResponsiveComponent;\n\n")),(0,o.kt)("h2",{id:"useportal-dynamic-target-dom"},"usePortal (dynamic target DOM)"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"React\uc758 \ucee8\ud14d\uc2a4\ud2b8\ub97c \uc720\uc9c0\uc2dc\ud0a4\uba74\uc11c \ud2b9\uc815 \ucef4\ud3ec\ub10c\ud2b8\ub97c \ub2e4\ub978 DOM\uc5d0 \uc5f0\uacb0\uc2dc\ud0ac \uc218 \uc788\ub2e4.  "),(0,o.kt)("li",{parentName:"ul"},"\ubaa8\ub2ec, \ud234\ud301, \ub4dc\ub86d\ub2e4\uc6b4 \ub4f1 \ubd80\ubaa8 \uc2a4\ud0c0\uc77c\uc5d0 \uc601\ud5a5\uc744 \ubc1b\uc9c0 \uc54a\ub3c4\ub85d \ud560 \ub54c  ")),(0,o.kt)("p",null,"\ub3d9\uc791\uc6d0\ub9ac  "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"createPortal\uc758 target domNode\uc744 \ub3d9\uc801\uc73c\ub85c \uc0dd\uc131\ud558\ub294 \uacbd\uc6b0."),(0,o.kt)("li",{parentName:"ul"},"step1. createPortal : \ub9ac\uc561\ud2b8 \uc5d8\ub9ac\uba3c\ud2b8\ub97c \ucee8\ud14c\uc774\ub108 HTMLElement \uc5d0 \ubd99\uc774\ub294 \ub2e8\uacc4"),(0,o.kt)("li",{parentName:"ul"},"\u3134DOM\uc5d0 \uc548\ubcf4\uc774\ub294\ub370 \ub9ac\uc561\ud2b8 \ucef4\ud3ec\ub10c\ud2b8\ub294 \uc791\ub3d9\ud55c\ub2e4."),(0,o.kt)("li",{parentName:"ul"},"step2. \ucee8\ud14c\uc774\ub108 HTMLElement \uc744 RealDOM\uc5d0 \ubd99\uc774\ub294 \ub2e8\uacc4"),(0,o.kt)("li",{parentName:"ul"},"\u3134\ub80c\ub354\ub9c1\uc774 \ub418\uc5b4 \ubcf4\uc778\ub2e4.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'import { useEffect, useRef } from "react";\nimport { createPortal } from "react-dom";\n\n// createPortal\uc758 target domNode\uc744 \ub3d9\uc801\uc73c\ub85c \uc0dd\uc131\ud558\ub294 \uacbd\uc6b0.\n// step1. createPortal : \ub9ac\uc561\ud2b8 \uc5d8\ub9ac\uba3c\ud2b8\ub97c \ucee8\ud14c\uc774\ub108 HTMLElement \uc5d0 \ubd99\uc774\ub294 \ub2e8\uacc4\n// \u3134DOM\uc5d0 \uc548\ubcf4\uc774\ub294\ub370 \ub9ac\uc561\ud2b8 \ucef4\ud3ec\ub10c\ud2b8\ub294 \uc791\ub3d9\ud55c\ub2e4.\n// step2. \ucee8\ud14c\uc774\ub108 HTMLElement \uc744 RealDOM\uc5d0 \ubd99\uc774\ub294 \ub2e8\uacc4\n// \u3134\ub80c\ub354\ub9c1\uc774 \ub418\uc5b4 \ubcf4\uc778\ub2e4.\n\nconst usePortal = (id: string): HTMLElement => {\n  const containerElemRef = useRef<HTMLElement | null>(null);\n\n  const createRootElement = (id: string): HTMLElement => {\n    const rootContainer = document.createElement("div");\n    rootContainer.setAttribute("id", id);\n    return rootContainer;\n  };\n\n  const addRootElement = (rootElem: HTMLElement): void => {\n    document.body.insertBefore(\n      rootElem,\n      document.body.lastElementChild?.nextElementSibling || null\n    );\n  };\n\n  const getContainerElem = (): HTMLElement => {\n    if (!containerElemRef.current) {\n      containerElemRef.current = document.createElement("div");\n    }\n\n    return containerElemRef.current;\n  };\n\n  useEffect(() => {\n    const existingRootElement = document.querySelector<HTMLElement>(`#${id}`);\n    const rootElement = existingRootElement || createRootElement(id);\n\n    if (!existingRootElement) addRootElement(rootElement);\n\n    if (rootElement && containerElemRef.current)\n      rootElement.appendChild(containerElemRef.current);\n\n    return () => {\n      // container Level \ucd08\uae30\ud654\n      if (containerElemRef.current) {\n        containerElemRef.current.remove();\n      }\n      // root Level \ucd08\uae30\ud654\n      if (!rootElement.childElementCount) {\n        rootElement.remove();\n      }\n    };\n  }, [id]);\n\n  return getContainerElem();\n};\n\nexport default usePortal;\n\nexport const Portal: React.FC<{ id: string; children: React.ReactNode }> = ({\n  id,\n  children,\n}) => {\n  const target = usePortal(id);\n\n  return createPortal(children, target);\n};\n\n\n')),(0,o.kt)("h2",{id:"useclickoutside"},"useClickOutside"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"1.event\uc5d0 target(\uc2e4\uc81c \uc774\ubca4\ud2b8 \ubc1c\uc0dd \ub178\ub4dc), currentTaget(\ub9ac\uc2a4\ub108\uac00 \uac78\ub9b0 \ub178\ub4dc)  ")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"2.document.body\uc5d0 mousedown \uc774\ubca4\ud2b8\ub97c \ub9ac\uc2a8\ud55c\ub2e4.    ")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"3.boxRef\uac00 event.target\uc744 contains \ud558\ub294\uc9c0 \ud310\ub2e8\ud55c\ub2e4.   ")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"document vs document.body \ucc28\uc774 "),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"document.body\ub294 html\uc548\uc758 body \ud0dc\uadf8\uae4c\uc9c0\ub9cc \ud074\ub9ad\uc744 \uac10\uc9c0\ud55c\ub2e4. "),(0,o.kt)("li",{parentName:"ul"},"CSS \ubb38\uc81c\ub85c body\ud0dc\uadf8\ub97c \ub118\uc5b4\uac00\ub294 \uc694\uc18c\uac00 \uc0dd\uae30\uba74 \uc804\uccb4 document \ud074\ub9ad\uc758 \ube48\ud07c\uc774 \uc0dd\uae38 \uc218 \uc788\ub2e4.  ")))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'import { useEffect, useRef } from "react";\n\ninterface UseClickOutsideProps {\n  onClickOutside?: () => void;\n}\n\nconst useClickOutside = ({ onClickOutside }: UseClickOutsideProps = {}) => {\n  const boxRef = useRef<HTMLElement>(null);\n\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (boxRef.current && !boxRef.current?.contains(event.target as Node)) {\n        onClickOutside && onClickOutside();\n      }\n    }\n    document.addEventListener("mousedown", handleClickOutside);\n\n    return () => {\n      document.removeEventListener("mousedown", handleClickOutside);\n    };\n  }, [boxRef, onClickOutside]);\n\n  return { boxRef };\n};\n\nexport default useClickOutside;\n\n')),(0,o.kt)("h2",{id:"useintersectionobserver"},"useIntersectionObserver"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'import { useState, useEffect, useRef } from "react";\n\ninterface IntersectionObserverArgs {\n  root?: Element | null; // root: null, // \ubdf0\ud3ec\ud2b8\ub97c root\ub85c \uc0ac\uc6a9\n  rootMargin?: string; // rootMargin: \'50px 0px\', // \uc704\uc544\ub798\ub85c 50px\uc758 \uc5ec\uc720\ub97c \ub450\uace0 \uac10\uc9c0\n  threshold?: number | number[];\n}\n\nconst useIntersectionObserver = (\n  options: IntersectionObserverArgs = {\n    root: null,\n    rootMargin: "",\n    threshold: 0,\n  }\n) => {\n  const [isIntersecting, setIsIntersecting] = useState(false);\n  const targetRef = useRef<Element | null>();\n\n  useEffect(() => {\n    if (!targetRef.current) return;\n\n    const observer = new IntersectionObserver(([entry]) => {\n      setIsIntersecting(entry.isIntersecting);\n    }, options);\n\n    observer.observe(targetRef.current);\n\n    return () => {\n      if (targetRef.current) observer.unobserve(targetRef.current);\n    };\n  }, [options]);\n\n  return { targetRef, isIntersecting };\n};\n\nexport default useIntersectionObserver;\n\n')),(0,o.kt)("h2",{id:"usefadein"},"useFadeIn"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"\nexport class FadeInAnimation {\n  private node: HTMLElement;\n  private duration: number = 1000; // 1sec delay\n  private startTime: number | null = null;\n  private frameId: number | null = null;\n\n  constructor(node: HTMLElement) {\n    this.node = node;\n  }\n  start(duration: number) {\n    this.duration = duration;\n    this.startTime = performance.now();\n    this.onProgress(0);\n    // (x) this.frameId = requestAnimationFrame(this.onFrame);\n    // (x) this.frameId = requestAnimationFrame(() => this.onFrame);\n    this.frameId = requestAnimationFrame(() => this.onFrame());\n  }\n  stop(): void {\n    if (this.frameId) cancelAnimationFrame(this.frameId);\n    this.startTime = null;\n    this.duration = 1;\n    this.frameId = null;\n  }\n  private onFrame() {\n    if (!this.startTime) return;\n\n    const timePassed = performance.now() - this.startTime;\n    const progress = Math.min(timePassed / this.duration, 1);\n\n    this.onProgress(progress);\n    if (progress < 1) {\n      this.frameId = requestAnimationFrame(() => this.onFrame());\n    } else {\n      this.stop();\n    }\n  }\n  private onProgress(progress: number) {\n    this.node.style.opacity = progress.toString();\n  }\n}\n\n---\nimport { useEffect, RefObject } from 'react';\nimport { FadeInAnimation } from './FadeInAnimation';\n\nexport function useFadeIn(ref: RefObject<HTMLElement>, duration: number): void {\n  useEffect(() => {\n    if (!ref.current) return;\n    const animation = new FadeInAnimation(ref.current);\n    animation.start(duration);\n\n    return () => {\n      animation.stop();\n    };\n  }, [ref, duration]);\n}\n")))}p.isMDXComponent=!0}}]);