"use strict";(self.webpackChunkdosimpact_blog=self.webpackChunkdosimpact_blog||[]).push([[1830],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},k=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=p(n),k=r,h=c["".concat(s,".").concat(k)]||c[k]||d[k]||l;return n?a.createElement(h,i(i({ref:t},u),{},{components:n})):a.createElement(h,i({ref:t},u))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=k;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[c]="string"==typeof e?e:r,i[1]=o;for(var p=2;p<l;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}k.displayName="MDXCreateElement"},8051:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const l={sidebar_position:10},i="Supabase Auth DeepDive",o={unversionedId:"g-fe/next+supa/next010-4",id:"g-fe/next+supa/next010-4",title:"Supabase Auth DeepDive",description:"\ucc38\uace0",source:"@site/docs/g-fe/6-next+supa/next010-4.md",sourceDirName:"g-fe/6-next+supa",slug:"/g-fe/next+supa/next010-4",permalink:"/docs/g-fe/next+supa/next010-4",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/g-fe/6-next+supa/next010-4.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{sidebar_position:10},sidebar:"frontEnd",previous:{title:"Supabase Auth",permalink:"/docs/g-fe/next+supa/next010-3"}},s={},p=[{value:"OAuth 2.0",id:"oauth-20",level:2},{value:"OAuth 2.1",id:"oauth-21",level:2},{value:"PKCE",id:"pkce",level:2},{value:"Implicit flow",id:"implicit-flow",level:4},{value:"PKCE flow",id:"pkce-flow",level:4},{value:"Part One: JWTs",id:"part-one-jwts",level:2},{value:"anon key",id:"anon-key",level:3},{value:"service role key",id:"service-role-key",level:3},{value:"user access token",id:"user-access-token",level:3},{value:"Part Two: Row Level Security",id:"part-two-row-level-security",level:2},{value:"Part Three: Policies",id:"part-three-policies",level:2}],u={toc:p},c="wrapper";function d(e){let{components:t,...l}=e;return(0,r.kt)(c,(0,a.Z)({},u,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"supabase-auth-deepdive"},"Supabase Auth DeepDive"),(0,r.kt)("p",null,"\ucc38\uace0",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=Mh3LaHmA21I&t=481s"},"[10\ubd84 \ud14c\ucf54\ud1a1] \ud64d\uc2e4\uc758 OAuth 2.0"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=DQFv0AxTEgM&t=991s"},"[NHN FORWARD 22] \ub85c\uadf8\uc778\uc5d0 \uc0ac\uc6a9\ud558\ub294 OAuth : \uacfc\uac70, \ud604\uc7ac \uadf8\ub9ac\uace0 \ubbf8\ub798"),(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("a",{parentName:"p",href:"https://medium.com/@itsinil/oauth-2-1-pkce-%EB%B0%A9%EC%8B%9D-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0-14500950cdbf"},"OAuth 2.1\uc758 PKCE \ub97c \ud1b5\ud574 AuthorizationCode \ubc29\uc2dd \uac1c\uc120\ud558\uae30"),"  "),(0,r.kt)("h2",{id:"oauth-20"},"OAuth 2.0"),(0,r.kt)("p",null,"\uc778\uc99d(Authentication)"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc0ac\uc6a9\uc790\uac00 \uc790\uc2e0\uc774 \uc8fc\uc7a5\ud558\ub294 \uc2e0\uc6d0\uc744 \uc99d\uba85\ud558\ub294 \uac83\uc785\ub2c8\ub2e4.  "),(0,r.kt)("li",{parentName:"ul"},"\uc0ac\uc6a9\uc790\uac00 \uc790\uc2e0\uc758 ID\uc640 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uba74, \uc2dc\uc2a4\ud15c\uc740 \uc774\ub97c \ud655\uc778\ud558\uace0 \uc0ac\uc6a9\uc790\uac00 \ub204\uad6c\uc778\uc9c0\ub97c \uc778\uc99d\ud569\ub2c8\ub2e4.")),(0,r.kt)("p",null,"\uc778\uac00(Authorization)"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc778\uc99d\ub41c \uc0ac\uc6a9\uc790\uac00 \ud2b9\uc815 \uc790\uc6d0\uc5d0 \uc811\uadfc\ud560 \uc218 \uc788\ub294 \uad8c\ud55c\uc774 \uc788\ub294\uc9c0\ub97c \uacb0\uc815\ud558\ub294 \uac83\uc785\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ul"},"\uc0ac\uc6a9\uc790\uac00 \ud2b9\uc815 \ud398\uc774\uc9c0\uc5d0 \uc811\uadfc\ud560 \uc218 \uc788\ub294 \uad8c\ud55c\uc774 \uc788\ub294\uc9c0\ub97c \ud655\uc778\ud569\ub2c8\ub2e4.  ")),(0,r.kt)("p",null,"1.\uc720\uc800\uac00 \uc9c1\uc811 \uc778\uc99d\uc744 \uc218\ud589\ud55c\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","2.\uad8c\ud55c\uc740 client app\uc774 \ubc1b\ub294\ub2e4. (supabase > GoTrue)    "),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Alt text",src:n(2954).Z,width:"1864",height:"1108"})),(0,r.kt)("h2",{id:"oauth-21"},"OAuth 2.1"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"PKCE  ")),(0,r.kt)("h2",{id:"pkce"},"PKCE"),(0,r.kt)("h4",{id:"implicit-flow"},"Implicit flow"),(0,r.kt)("p",null,"Implicit flow\ub294 OAuth 2.0\uc758 \uc2a4\ud399\uc774\ub2e4.  "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ud074\ub77c\uc774\uc5b8\ud2b8 \uce21\uc5d0\uc11c\ub9cc \uc774\ub8e8\uc5b4\uc9c0\uba70, "),(0,r.kt)("li",{parentName:"ul"},"\uc0ac\uc6a9\uc790\uac00 \uc778\uc99d\uc744 \ub9c8\uce58\uba74 \uc561\uc138\uc2a4 \ud1a0\ud070\uc774 URL \ud504\ub798\uadf8\uba3c\ud2b8\uc5d0 \ud3ec\ud568\ub418\uc5b4 \ubc18\ud658"),(0,r.kt)("li",{parentName:"ul"},"\uc774 \ubc29\ubc95\uc740 \uac04\ub2e8\ud558\uace0 \uad6c\ud604\ud558\uae30 \uc27d\uc9c0\ub9cc, \ubcf4\uc548\uc0c1\uc758 \uc774\uc720\ub85c \uad8c\uc7a5\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")),(0,r.kt)("h4",{id:"pkce-flow"},"PKCE flow"),(0,r.kt)("p",null,"PKCE\ub294 \ucf54\ub4dc \uad50\ud658\uc6a9 \uc99d\uba85 \ud0a4(Proof Key for Code Exchange)  "),(0,r.kt)("p",null,"OAuth 2.1\uc758 \uc2a4\ud399\uc774\ub2e4.  "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"PKCE flow\ub294 \uc11c\ubc84 \uce21\uc5d0\uc11c \uc774\ub8e8\uc5b4\uc9c0\uba70   "),(0,r.kt)("li",{parentName:"ul"},"\ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \uc778\uc99d \ucf54\ub4dc\ub97c \ubc1b\uc740 \ud6c4 \uc11c\ubc84\uc5d0 \uc804\uc1a1\ud558\uc5ec \uc561\uc138\uc2a4 \ubc0f \ub9ac\ud504\ub808\uc2dc \ud1a0\ud070\uc744 \ubc1b\uc2b5\ub2c8\ub2e4.   "),(0,r.kt)("li",{parentName:"ul"},"\uc774 \ubc29\ubc95\uc740 implicit flow\ubcf4\ub2e4 \ubcf4\uc548\uc131\uc774 \ub192\uc73c\uba70, "),(0,r.kt)("li",{parentName:"ul"},"\uacf5\uaca9\uc790\uac00 \uc561\uc138\uc2a4 \ud1a0\ud070\uc744 \ud0c8\ucde8\ud558\ub294 \uac83\uc744 \ubc29\uc9c0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")),(0,r.kt)("p",null,"\uc560\ud50c\ub9ac\ucf00\uc774\uc158\uacfc \uc778\uc99d \uc11c\ubc84 \uac04\uc5d0 \uc0c8\ub85c \uace0\uce68 \ubc0f \uc561\uc138\uc2a4 \ud1a0\ud070\uc744 \uc548\uc804\ud558\uac8c \uad50\ud658\ud560 \uc218 \uc788\uac8c \ud574\uc8fc\ub294 OAuth \ud504\ub85c\ud1a0\ucf5c\uc758 \ud655\uc7a5   "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ub3d9\uc77c \ucef4\ud4e8\ud130\uc758 \ub2e4\ub978 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uacfc \uac19\uc740 \uc81c3\uc790\uac00 \uc0c8\ub85c \uace0\uce68 \ubc0f \uc561\uc138\uc2a4 \ud1a0\ud070 \uad50\ud658\uc744 \uac00\ub85c\ucc4c \uc218 \uc788\ub294 \uc0c1\ud669\uc5d0\uc11c \uc0ac\uc6a9  "),(0,r.kt)("li",{parentName:"ul"},"\ubaa8\ubc14\uc77c \uc7a5\uce58\uc5d0 \ud2b9\ud788 \uc720\uc6a9, \ub2e8\uc77c \ud398\uc774\uc9c0 \uc571\uc5d0\uc11c\ub3c4 \uc545\uc6a9\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4.   "),(0,r.kt)("li",{parentName:"ul"},"PKCE\ub97c \uc0ac\uc6a9\ud558\uba74 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc740 \uc778\uc99d \uc694\uccad\uc744 \uc2dc\uc791\ud55c \ub3d9\uc77c\ud55c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c\ub9cc \uc778\uc99d \ucf54\ub4dc\ub97c \ud1a0\ud070\uc73c\ub85c \uad50\ud658\ud560 \uc218 \uc788\ub3c4\ub85d \ubcf4\uc7a5\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. "),(0,r.kt)("li",{parentName:"ul"},"\uc774\ub294 \uc0ac\uc6a9\uc790 \ub370\uc774\ud130\uc5d0 \ub300\ud55c \ubb34\ub2e8 \uc561\uc138\uc2a4\ub97c \ubc29\uc9c0\ud558\ub294 \ub370 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4.  ")),(0,r.kt)("p",null,"ref : ",(0,r.kt)("a",{parentName:"p",href:"https://supabase.com/docs/guides/auth/auth-deep-dive/auth-deep-dive-jwts"},"https://supabase.com/docs/guides/auth/auth-deep-dive/auth-deep-dive-jwts"),"  "),(0,r.kt)("h2",{id:"part-one-jwts"},"Part One: JWTs"),(0,r.kt)("p",null,"\uc65c \uac11\uc790\uae30 JWT\uac00 \uc778\uae30\ub97c \ub04c\uace0 \uc788\ub294\uc9c0 \uad81\uae08\ud558\uc2e4 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4. \ub2f5\uc740 \ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4 \uc544\ud0a4\ud14d\ucc98\uac00 \ub300\ub7c9\uc73c\ub85c \ucc44\ud0dd\ub418\uba74\uc11c \uc5ec\ub7ec \uac1c\uc758 \uc11c\ub85c \ub2e4\ub978 \ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4(API, \uc6f9\uc0ac\uc774\ud2b8, \uc11c\ubc84 \ub4f1)\uac00 \uc0ac\uc6a9\uc790\uac00 \uc790\uc2e0\uc774 \ub9d0\ud558\ub294 \uc0ac\uc6a9\uc790, \uc989 '\ub85c\uadf8\uc778\ud55c' \uc0ac\uc6a9\uc790\uc778\uc9c0 \uc27d\uac8c \uac80\uc99d\ud558\uace0\uc790 \ud558\ub294 \uc0c1\ud669\uc5d0 \ucc98\ud588\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4. \uae30\uc874\uc758 \uc138\uc158 \ud1a0\ud070\uc740 \uac01 \ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4\uac00 \ud604\uc7ac \uc720\ud6a8\ud55c \uc138\uc158 \ud1a0\ud070\uc758 \uae30\ub85d\uc744 \uc720\uc9c0\ud558\uac70\ub098 \uc0ac\uc6a9\uc790\uac00 \ub9ac\uc18c\uc2a4\uc5d0 \uc561\uc138\uc2a4\ud558\ub824\uace0 \ud560 \ub54c\ub9c8\ub2e4 \uc911\uc559 \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \ucffc\ub9ac\ud558\uc5ec \uc138\uc158 \ud1a0\ud070\uc758 \uc720\ud6a8\uc131\uc744 \ud655\uc778\ud574\uc57c \ud558\ubbc0\ub85c \ub9e4\uc6b0 \ube44\ud6a8\uc728\uc801\uc774\ubbc0\ub85c \uc774 \uacbd\uc6b0 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uc774\ub7ec\ud55c \uc758\ubbf8\uc5d0\uc11c JWT \uae30\ubc18 \uc778\uc99d\uc740 \uc911\uc559 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uc561\uc138\uc2a4\ud560 \ud544\uc694 \uc5c6\uc774 jwt_secret\uc744 \uac00\uc9c4 \uc0ac\ub78c\uc774\ub77c\uba74 \ub204\uad6c\ub098 \ud1a0\ud070\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc73c\ubbc0\ub85c \ud0c8\uc911\uc559\ud654\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",null,"\ucc38\uace0: JWT\uc758 \ud55c \uac00\uc9c0 \ub2e8\uc810\uc740 \uc138\uc158 \ud1a0\ud070\ucc98\ub7fc \uc27d\uac8c \ucde8\uc18c\ud560 \uc218 \uc5c6\ub2e4\ub294 \uac83\uc785\ub2c8\ub2e4. JWT\uac00 \uc545\uc758\uc801\uc778 \ud589\uc704\uc790\uc5d0\uac8c \uc720\ucd9c\ub41c \uacbd\uc6b0, \uc2dc\uc2a4\ud15c \uc18c\uc720\uc790\uac00 \uc5c5\ub370\uc774\ud2b8\ud558\uc9c0 \uc54a\ub294 \ud55c jwt_secret(\ubb3c\ub860 \ubaa8\ub4e0 \uc0ac\ub78c\uc758 \uae30\uc874 \ud1a0\ud070\uc774 \ubb34\ud6a8\ud654\ub428) \ub9cc\ub8cc \ub0a0\uc9dc\uac00 \ub420 \ub54c\uae4c\uc9c0 \uc5b4\ub514\uc5d0\uc11c\ub098 JWT\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4 ."),(0,r.kt)("p",null,"Supabase\uc5d0\uc11c\ub294 \uc138 \uac00\uc9c0 \ubaa9\uc801\uc73c\ub85c JWT\ub97c \ubc1c\ud589\ud569\ub2c8\ub2e4:"),(0,r.kt)("p",null,"anon key : \uc774 \ud0a4\ub294 Supabase API \uac8c\uc774\ud2b8\uc6e8\uc774\ub97c \uc6b0\ud68c\ud558\ub294 \ub370 \uc0ac\uc6a9\ub418\uba70 \ud074\ub77c\uc774\uc5b8\ud2b8 \uce21 \ucf54\ub4dc\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","service role key : \uc774 \ud0a4\ub294 \uc288\ud37c \uad00\ub9ac\uc790 \uad8c\ud55c\uc774 \uc788\uc73c\uba70 \ud589 \uc218\uc900 \ubcf4\uc548\uc744 \uc6b0\ud68c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ud074\ub77c\uc774\uc5b8\ud2b8 \uce21 \ucf54\ub4dc\uc5d0 \ub123\uc9c0 \ub9c8\uc138\uc694. \ube44\uacf5\uac1c\ub85c \uc720\uc9c0\ud558\uc138\uc694.",(0,r.kt)("br",{parentName:"p"}),"\n","user specific jwts: \ud504\ub85c\uc81d\ud2b8/\uc11c\ube44\uc2a4/\uc6f9\uc0ac\uc774\ud2b8\uc5d0 \ub85c\uadf8\uc778\ud558\ub294 \uc0ac\uc6a9\uc790\uc5d0\uac8c \ubc1c\uae09\ud558\ub294 \ud1a0\ud070\uc785\ub2c8\ub2e4.  "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc138\uc158 \ud1a0\ud070\uc5d0 \ud574\ub2f9\ud558\ub294 \ucd5c\uc2e0 \ud1a0\ud070\uc73c\ub85c, \uc0ac\uc6a9\uc790\uac00 \ud2b9\uc815 \ucf58\ud150\uce20\ub098 \uad8c\ud55c\uc5d0 \uc561\uc138\uc2a4\ud558\ub294 \ub370 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.  ")),(0,r.kt)("h3",{id:"anon-key"},"anon key"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"curl 'https://xscduanzzfseqszwzhcy.supabase.co/rest/v1/colors?select=name' \\\n-H \"apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYxNDIwNTE3NCwiZXhwIjoxOTI5NzgxMTc0fQ.-NBR1WnZyQGpRLdXJfgfpszoZ0EeE6KHatJsDPLIX8c\"\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"JWT token \uc774\ub2e4.  "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://jwt.io/"},"https://jwt.io/")," \uc5d0\uc11c \ud655\uc778\ud574 \ubcf4\uc790.  "),(0,r.kt)("li",{parentName:"ul"},"RLS \ub355\ubd84\uc5d0 anon key\ub294 \uacf5\uac1c\ub41c \uc0ac\uc6a9\uc790\uc5d0\uac8c \ub178\ucd9c\ub418\ub3c4 \uad1c\ucc2e\ub2e4.  ")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n  "role": "anon",\n  "iss": "supabase",\n  "iat": 1614205174,\n  "exp": 1929781174\n}\n')),(0,r.kt)("h3",{id:"service-role-key"},"service role key"),(0,r.kt)("p",null,"\ub450 \ubc88\uc9f8 \ud0a4\uc778 \uc11c\ube44\uc2a4 \uc5ed\ud560 \ud0a4\ub294 \uc790\uc2e0\uc758 \uc11c\ubc84 \ub610\ub294 \ud658\uacbd \uc911 \ud558\ub098\uc5d0\uc11c\ub9cc \uc0ac\uc6a9\ud574\uc57c \ud558\uba70 \ucd5c\uc885 \uc0ac\uc6a9\uc790\uc640 \uacf5\uc720\ud574\uc11c\ub294 \uc548 \ub429\ub2c8\ub2e4.\n\uc774 \ud1a0\ud070\uc744 \uc0ac\uc6a9\ud558\uc5ec \ub370\uc774\ud130\ub97c \uc77c\uad04 \uc0bd\uc785\ud558\ub294 \ub4f1\uc758 \uc791\uc5c5\uc744 \uc218\ud589\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("h3",{id:"user-access-token"},"user access token"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc0ac\uc6a9\uc790 \uc561\uc138\uc2a4 \ud1a0\ud070\uc740 \uc608\ub97c \ub4e4\uc5b4 \ud638\ucd9c\ud560 \ub54c \ubc1c\uae09\ub418\ub294 JWT  "),(0,r.kt)("li",{parentName:"ul"},"Authorization Bearer header \uc5d0 \ucd94\uac00\ub418\uc5b4\uc11c \ubcf4\ub0b4\uc9c4\ub2e4.  ")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"supabase.auth.signIn({\n  email: 'lao.gimmie@gov.sg',\n  password: 'They_Live_1988!',\n})\n\ncurl 'https://xscduanzzfseqszwzhcy.supabase.co/rest/v1/colors?select=name' \\\n-H \"apikey: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYxNDIwNTE3NCwiZXhwIjoxOTI5NzgxMTc0fQ.-NBR1WnZyQGpRLdXJfgfpszoZ0EeE6KHatJsDPLIX8c\" \\\n-H \"Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNjE1ODI0Mzg4LCJzdWIiOiIwMzM0NzQ0YS1mMmEyLTRhYmEtOGM4YS02ZTc0OGY2MmExNzIiLCJlbWFpbCI6InNvbWVvbmVAZW1haWwuY29tIiwiYXBwX21ldGFkYXRhIjp7InByb3ZpZGVyIjoiZW1haWwifSwidXNlcl9tZXRhZGF0YSI6bnVsbCwicm9sZSI6ImF1dGhlbnRpY2F0ZWQifQ.I-_oSsJamtinGxniPETBf-ezAUwDW2sY9bJIThvdX9s\"\n")),(0,r.kt)("h2",{id:"part-two-row-level-security"},"Part Two: Row Level Security"),(0,r.kt)("p",null,"\"\ub0b4 \uc775\uba85 \ud0a4\uac00 \ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0 \uc788\uc73c\uba74 \ub204\uad70\uac00 \ub0b4 \uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc77d\uace0 \ub0b4 \ud0a4\ub97c \ud6d4\uce60 \uc218 \uc5c6\ub098\uc694?\"\ub77c\ub294 \ud765\ubbf8\ub85c\uc6b4 \uc9c8\ubb38\uc774 \uc81c\uae30\ub420 \uc218 \uc788\uc9c0\ub9cc, \ub300\ub2f5\uc740 '\uadf8\ub807\ub2e4'\uc785\ub2c8\ub2e4. \ubc14\ub85c \uc774 \uc810\uc774 Postgres \uc815\ucc45\uc774 \ud544\uc694\ud55c \uc774\uc720\uc785\ub2c8\ub2e4."),(0,r.kt)("p",null,'Postgres\uc758 "\ud589 \uc218\uc900 \ubcf4\uc548" \uc815\ucc45\uc744 \uc0ac\uc6a9\ud558\uba74 \uae30\ubcf8\uc801\uc73c\ub85c \uc775\uba85 \ud0a4\uac00 \uc561\uc138\uc2a4\ud558\ub3c4\ub85d \ud5c8\uc6a9\ud558\uac70\ub098 \ud5c8\uc6a9\ud558\uc9c0 \uc54a\ub294 \ub370\uc774\ud130\uc5d0 \ub300\ud55c \uaddc\uce59\uc744 \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.'),(0,r.kt)("p",null,"\uc608\ub97c \ub4e4\uc5b4 \uc775\uba85 \ud0a4\ub294 \ud2b9\uc815 \ud14c\uc774\ube14\uc5d0\uc11c \uc77d\uae30\ub9cc \uac00\ub2a5\ud558\uace0 \uc4f0\uae30, \uc5c5\ub370\uc774\ud2b8, \uc0ad\uc81c\ub294 \ubd88\uac00\ub2a5\ud574\uc57c \ud55c\ub2e4\uace0 \ub9d0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",null,"\uadf8\ub9ac\uace0 \uc774\ub7ec\ud55c \uaddc\uce59\uc740 \uc6d0\ud558\ub294 \ub9cc\ud07c \ubcf5\uc7a1\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\uc608\ub97c \ub4e4\uc5b4 \uc775\uba85 \ud0a4\ub294 \ubaa9\uc694\uc77c \uc624\ud6c4 4\uc2dc\uc5d0\uc11c 6\uc2dc \uc0ac\uc774\uc5d0 \uc0bd\uc785\ub41c \ud589\uc744 \uc0ad\uc81c\ud560 \uc218 \uc788\uace0, ID \uc5f4\uc774 \uc9dd\uc218\uc778 \ud589\ub9cc \uc0ad\uc81c\ud560 \uc218 \uc788\ub2e4\uace0 \ub9d0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uaf64 \uc774\uc0c1\ud558\uc9c0\ub9cc \uc815\ucc45\uc758 \ud798\uc744 \ubcf4\uc5ec\uc8fc\ub294 \uc608\uc2dc\uc785\ub2c8\ub2e4."),(0,r.kt)("p",null,"\ub9ac\ub354\ubcf4\ub4dc \ud14c\uc774\ube14\uc744 \ub9cc\ub4e0\ub2e4\uace0 \uac00\uc815\ud574 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\n\uc6f9\uc0ac\uc774\ud2b8\uc758 \uc0ac\uc6a9\uc790\ub4e4\uc774 \uc21c\uc704\ud45c\ub97c \uc77d\uc744 \uc218\ub294 \uc788\uc9c0\ub9cc \uc791\uc131, \uc5c5\ub370\uc774\ud2b8, \uc0ad\uc81c\ub294 \ud560 \uc218 \uc5c6\ub3c4\ub85d \ud558\ub824\uace0 \ud569\ub2c8\ub2e4.\n\uba3c\uc800 SQL\ub85c \ud14c\uc774\ube14\uc744 \uc815\uc758\ud558\uace0 \ub354\ubbf8 \ub370\uc774\ud130\ub97c \ucd94\uac00\ud569\ub2c8\ub2e4:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"create table leaderboard (\n  name text,\n  score int\n);\ninsert into leaderboard  (name, score) values  ('Paul', 100),('Leto', 50), ('Chani', 200);\n\n\n\uc774\ub97c \uc0ac\uc6a9\ud558\uc5ec \ud14c\uc774\ube14\uc5d0\uc11c \uc790\uc720\ub86d\uac8c \uc77d\uace0 \uc4f8 \uc218 \uc788\uc74c\uc744 \uc54c \uc218 \uc788\uc2b5\ub2c8\ub2e4:\n\n// Writing\nconst { data, error } = await supabase.from('leaderboard').insert({ name: 'Bob', score: 99999 })\n\n// Reading\nconst { data, error } = await supabase\n  .from('leaderboard')\n  .select('name, score')\n  .order('score', { ascending: false })\n\n")),(0,r.kt)("p",null,"\uc774\uc81c \uad8c\ud55c \ubd80\uc5ec\uc5d0\uc11c \uc775\uba85 \ud0a4(JWT)\ub97c \ubcf4\ub0b4\ub294 \ubaa8\ub4e0 \uc0ac\uc6a9\uc790\uc5d0 \ub300\ud574 \ud14c\uc774\ube14\uc744 \uc77d\uc744 \uc218 \uc788\ub3c4\ub85d \uc815\ucc45\uc744 \ucd94\uac00\ud574\uc57c \ud569\ub2c8\ub2e4: \ubb34\uae30\uba85 \ud5e4\ub354\uc5d0 \ucd94\uac00\ud574\uc57c \ud569\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"CREATE POLICY anon_read_leaderboard ON leaderboard\n    FOR SELECT\n    TO 'anon'\n    USING (true);\n\n")),(0,r.kt)("p",null,"\uc5ec\uae30\uc11c anon_read_leaderboard\ub294 \uc815\ucc45\uc5d0 \ub300\ud574 \uc120\ud0dd\ud558\ub294 \uc774\ub984\uc77c \ubfd0\uc785\ub2c8\ub2e4.\n\ub9ac\ub354\ubcf4\ub4dc\ub294 \ud14c\uc774\ube14 \uc774\ub984\uc785\ub2c8\ub2e4.\nFOR SELECT\ub294 \uc774 \uc815\ucc45\uc774 \uc77d\uae30(\ub610\ub294 SQL\uc5d0\uc11c \"\uc120\ud0dd\")\uc5d0 \ub300\ud574\uc11c\ub9cc \uc801\uc6a9\ub418\uae30\ub97c \uc6d0\ud55c\ub2e4\ub294 \uc758\ubbf8\uc785\ub2c8\ub2e4.\nTO\ub294 \uc774 \uc815\ucc45\uc774 \uc775\uba85 Postgres \uc5ed\ud560\uc5d0\ub9cc \uc801\uc6a9\ub428\uc744 \uc758\ubbf8\ud569\ub2c8\ub2e4. \uadf8\ub9ac\uace0 \ub9c8\uc9c0\ub9c9\uc73c\ub85c \uaddc\uce59 \uc790\uccb4\ub294 'true'\ub85c, \uc775\uba85 \uc0ac\uc6a9\uc790\uc5d0 \ub300\ud55c \ubaa8\ub4e0 \uc120\ud0dd\uc744 \ud5c8\uc6a9\ud55c\ub2e4\ub294 \uc758\ubbf8\uc785\ub2c8\ub2e4."),(0,r.kt)("h2",{id:"part-three-policies"},"Part Three: Policies"),(0,r.kt)("p",null,"\uc0ac\uc6a9\uc790 \uae30\ubc18 \ud589 \uc218\uc900 \uc815\ucc45"),(0,r.kt)("p",null,"\uc774\uc81c JWT \uc5ed\ud560\uc744 \uae30\ubc18\uc73c\ub85c \ud14c\uc774\ube14\uc5d0 \ub300\ud55c \uc561\uc138\uc2a4\ub97c \uc81c\ud55c\ud558\ub294 \ubc29\ubc95\uc744 \uc54c\uc558\uc73c\ubbc0\ub85c\n\uc774\ub97c \uc0ac\uc6a9\uc790 \uad00\ub9ac\uc640 \uacb0\ud569\ud558\uc5ec \uc0ac\uc6a9\uc790\uac00 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0\uc11c \uc77d\uace0 \uc4f8 \uc218 \uc788\ub294 \ub370\uc774\ud130\ub97c \ud6e8\uc52c \ub354 \ud6a8\uacfc\uc801\uc73c\ub85c \uc81c\uc5b4\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\uba3c\uc800 Supabase\uc5d0\uc11c \uc0ac\uc6a9\uc790 \uc138\uc158\uc774 \uc791\ub3d9\ud558\ub294 \ubc29\uc2dd\ubd80\ud130 \uc0b4\ud3b4\ubcf4\uace0 \ub098\uc911\uc5d0 \uc0ac\uc6a9\uc790 \uc911\uc2ec \uc815\ucc45 \uc791\uc131\uc73c\ub85c \ub118\uc5b4\uac00\uaca0\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"// see full api reference here: /docs/reference/javascript/auth-signup\nsupabase.auth.signUp({ email, password })\n")),(0,r.kt)("p",null,"\uae30\ubcf8\uc801\uc73c\ub85c \uc0ac\uc6a9\uc790\uc5d0\uac8c \ud655\uc778 \uc774\uba54\uc77c\uc774 \uc804\uc1a1\ub429\ub2c8\ub2e4.  "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc0ac\uc6a9\uc790\uac00 \uc774\uba54\uc77c\uc758 \ub9c1\ud06c\ub97c \ud074\ub9ad\ud558\uba74 \uc0ac\uc774\ud2b8\ub85c \ub9ac\ub514\ub809\uc158\ub429\ub2c8\ub2e4(\ub300\uc2dc\ubcf4\ub4dc\uc758 \uc778\uc99d > \uc124\uc815\uc5d0\uc11c \uc0ac\uc774\ud2b8 URL\uc744 \uc81c\uacf5\ud574\uc57c \ud569\ub2c8\ub2e4.). "),(0,r.kt)("li",{parentName:"ul"},"\uae30\ubcf8\uac12\uc740 http://localhost:3000)\uc774\uba70 \ucffc\ub9ac \ub9e4\uac1c\ubcc0\uc218\ub97c \ud3ec\ud568\ud55c \uc804\uccb4 URL\uc740 \ub2e4\uc74c\uacfc \uac19\uc774 \ud45c\uc2dc\ub429\ub2c8\ub2e4:  "),(0,r.kt)("li",{parentName:"ul"},"http://localhost:3000/#access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNjE2NDI5MDY0LCJzdWIiOiI1YTQzNjVlNy03YzdkLTRlYWYtYThlZS05ZWM5NDMyOTE3Y2EiLCJlbWFpbCI6ImFudEBzdXBhYmFzZS5pbyIsImFwcF9tZXRhZGF0YSI6eyJwcm92aWRlciI6ImVtYWlsIn0sInVzZXJfbWV0YWRhdGEiOnt9LCJyb2xlIjoiYXV0aGVudGljYXRlZCJ9.4IFzn4eymqUNYYo2AHLxNRL8m08G93Qcg3_fblGqDjo&expires_in=3600&refresh_token=RuioJv2eLV05lgH5AlJwTw&token_type=bearer&type=signup")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"// the base url - whatever you set in the Auth Settings in supabase.com/dashboard dashboard\nhttp://localhost:3000/\n\n// note we use the '#' (fragment) instead of '?' query param\n// the access token is a JWT issued to the user\n#access_token=\n\n// valid for 60 minutes by default\n&expires_in=3600\n\n// use to get a new access_token before 60 minutes expires\n&refresh_token=RuioJv2eLV05lgH5AlJwTw\n\n// can use as the Authorization: Bearer header in requests to your API\n&token_type=bearer\n\n// why was this token issued? was it a signup, login, password reset, or magic link?\n&type=signup\n")),(0,r.kt)("p",null,"\uc778\uc99d\ub41c \uc5ed\ud560\uc740 Supabase\uc5d0\uc11c \ud2b9\ubcc4\ud558\uba70, API\uc5d0 \uc778\uc99d\ub41c \uc0ac\uc6a9\uc790\uc784\uc744 \uc54c\ub9ac\uace0 \uc694\uccad\ub41c \ub9ac\uc18c\uc2a4(\ud14c\uc774\ube14 \ub610\ub294 \ud589)\uc5d0 \ucd94\uac00\ud55c \ubaa8\ub4e0 \uc815\ucc45\uacfc JWT\ub97c \ube44\uad50\ud558\ub3c4\ub85d \uc54c\ub9bd\ub2c8\ub2e4."),(0,r.kt)("p",null,"\ud558\uc704 \ud074\ub808\uc784\uc740 \uae30\ubcf8\uc801\uc73c\ub85c auth.users \ud14c\uc774\ube14\uc5d0 \uc788\ub294 \uc0ac\uc6a9\uc790\uc758 \uace0\uc720 \uc2dd\ubcc4\uc790\uc774\ubbc0\ub85c \uc77c\ubc18\uc801\uc73c\ub85c JWT\ub97c \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc758 \ud589\uacfc \uc77c\uce58\uc2dc\ud0a4\ub294 \ub370 \uc0ac\uc6a9\ud569\ub2c8\ub2e4(\ucc38\uace0\ub85c, \uc778\uc99d API\uac00 \uc62c\ubc14\ub974\uac8c \uc791\ub3d9\ud558\ub824\uba74 \uc778\uc99d \uc2a4\ud0a4\ub9c8\uc5d0 \uc758\uc874\ud558\ubbc0\ub85c \uc77c\ubc18\uc801\uc73c\ub85c Supabase \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0\uc11c \uc5b4\ub5a4 \uc2dd\uc73c\ub85c\ub4e0 \uc778\uc99d \uc2a4\ud0a4\ub9c8\ub97c \ubcc0\uacbd\ud558\uc9c0 \uc54a\ub294 \uac83\uc774 \uc88b\uc2b5\ub2c8\ub2e4)."))}d.isMDXComponent=!0},2954:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-9-9de9dd32e19922aff6e87e5c299f3dd8.png"}}]);